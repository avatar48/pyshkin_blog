!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _lib_utils_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){if(!e.fastXDM){var t={},n=[],i={};e.fastXDM={_id:0,helperUrl:"https://vk.com/js/api/xdmHelper.js",Server:function(n,i,o){this.methods=n||{},this.filter=i,this.options=o||{},this.id=e.fastXDM._id++,this.key=function(){for(var e="",t=0;t<5;t++)e+=Math.ceil(15*Math.random()).toString(16);return e}(),this.frameName="fXD"+this.key,this.frameId="fXD",this.server=!0,this.methods["%init%"]=this.methods.__fxdm_i=function(){e.fastXDM.run(this.id),this.methods.onInit&&this.methods.onInit()},t[this.key]=[l,this]},Client:function(n,i){if(this.methods=n||{},this.options=i||{},this.id=e.fastXDM._id++,this.client=!0,e.fastXDM.run(this.id),0!==window.name.indexOf("fXD"))throw Error("Wrong window.name property.");this.key=window.name.substr(3),this.caller=window.parent,t[this.key]=[l,this],e.fastXDM.on("helper",function(){e.fastXDM.onClientStart(this)},this),s(function(e){e.send(this,e.json.stringify(["%init%"]));var t=this.methods;setTimeout(function(){t.onInit&&t.onInit()},0)},this)},onMessage:function(e){if(e.origin!=document.origin){var n=cur.app&&cur.app.options&&cur.app.options.src?cur.app.options.src:"";if(!n)return debugLog("Wrong app url"),!1;e.origin!=n&&e.origin+"/"!=n.substring(0,e.origin.length+1)&&debugLog("Warning: message from "+e.origin+" will be disable in future")}var i=e.data;if(!i)return!1;if("string"!=typeof i&&!(i instanceof String))return!1;var o=i.substr(0,5);if(t[o]){var r=t[o][1];!r||r.filter&&!r.filter(e.origin)||t[o][0](i.substr(6),r)}},setJSON:function(e){i.json=e},getJSON:function(e){if(!e)return i.json;s(function(t){e(t.json)})},setEnv:function(e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);c()},_q:{},on:function(e,t,n){this._q[e]||(this._q[e]=[]),-1==this._q[e]?t.apply(n):this._q[e].push([t,n])},run:function(e){for(var t=(this._q[e]||[]).length,n=0;n<t;n++)this._q[e][n][0].apply(this._q[e][n][1]);this._q[e]=-1},waitFor:o},e.fastXDM.Server.prototype.start=function(t,n){if(t.contentWindow)this.caller=t.contentWindow,this.frame=t,e.fastXDM.on("helper",function(){e.fastXDM.onServerStart(this)},this);else{var i=this;(n=n||0)<50&&setTimeout(function(){i.start.apply(i,[t,n+1])},100)}},e.fastXDM.Server.prototype.destroy=function(){delete t[this.key]},e.fastXDM.Server.prototype.append=function(e,t,n){var i=document.createElement("DIV");i.innerHTML='<iframe name="'+this.frameName+'" id="'+this.frameId+'" '+(n||"")+"></iframe>";var o=i.firstChild,r=this,a=function(){o.frameBorder="0",t&&function e(t,n){for(var i in n)t[i]&&"object"===_typeof(t[i])?e(t[i],n[i]):t[i]=n[i]}(o,t),e.insertBefore(o,e.firstChild),r.start(o)};return~e.className.indexOf("app_container--vk-app")&&delete t.scrolling,r.options.layer?a():setTimeout(function(){a()},0),o},e.fastXDM.Client.prototype.callMethod=e.fastXDM.Server.prototype.callMethod=function(){for(var t=this,n=Array.prototype.slice.call(arguments),i=n.shift(),r=0,c=n.length;r<c;r++)"function"==typeof n[r]?function(){t.funcsCount=(t.funcsCount||0)+1;var e=n[r],i="_func"+t.funcsCount;t.methods[i]=function(){e.apply(this,arguments),delete this.methods[i]},n[r]={_func:t.funcsCount}}():this.options.safe&&(n[r]=a(n[r],!1));o(this,"caller",function(){e.fastXDM.on(this.id,function(){s(function(e){e.send(this,e.json.stringify([i,n]))},this)},this)},this)},e.JSON&&"object"===_typeof(e.JSON)&&e.JSON.parse&&e.JSON.stringify&&'{"a":[1,2,3]}'===e.JSON.stringify({a:[1,2,3]}).replace(/ /g,"")?i.json={parse:e.JSON.parse,stringify:e.JSON.stringify}:e.fastXDM._needJSON=!0,e.postMessage?(i.protocol="p",i.send=function(e,t){var n=e.frame?e.frame.contentWindow:e.caller;if(n)try{n.postMessage(e.key+":"+t,"*")}catch(i){window.postMessage.call(n,e.key+":"+t,"*")}},e.addEventListener?e.addEventListener("message",e.fastXDM.onMessage,!1):e.attachEvent("onmessage",e.fastXDM.onMessage),e.fastXDM._needJSON?(e.fastXDM._onlyJSON=!0,r()):c()):r()}function o(e,t,n,i,r){e[t]?n.apply(i):(r=r||0)<1e3&&setTimeout(function(){o(e,t,n,i,r+1)},0)}function r(t){setTimeout(function(){var n=document.createElement("script");n.type="text/javascript",n.src=t||e.fastXDM.helperUrl,o(document,"body",function(){document.getElementsByTagName("HEAD")[0].appendChild(n)})},0)}function a(e,t){var n=void 0;switch(void 0===e?"undefined":_typeof(e)){case"string":n=t?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):e.replace(/&#039;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");break;case"object":if("[object Array]"===Object.prototype.toString.apply(e)){n=[];for(var i=0,o=e.length;i<o;i++)n[i]=a(e[i],t)}else for(var r in n={},e)Object.hasOwnProperty.call(e,r)&&(n[r]=a(e[r],t));break;default:n=e}return n}function s(e,t){i.loaded?e.apply(t,[i]):n.push([t,e])}function c(){i.loaded=!0;for(var e=0,t=n.length;e<t;e++)n[e][1].apply(n[e][0],[i])}function l(e,t){s(function(n){var i=n.json.parse(e);if(i[0]){i[1]||(i[1]=[]);for(var o=0,r=i[1].length;o<r;o++)i[1][o]&&i[1][o]._func?function(){var e=i[1][o]._func;i[1][o]=function(){var n=Array.prototype.slice.call(arguments);n.unshift("_func"+e),t.callMethod.apply(t,n)}}():t.options.safe&&(i[1][o]=a(i[1][o],!0));setTimeout(function(){if(!t.methods[i[0]])throw Error("fastXDM: Method "+i[0]+" is undefined");t.methods[i[0]].apply(t,i[1])},0)}})}}(window),window._iconAdd||(window._iconAdd=window.devicePixelRatio>=2?"_2x":""),window.appCallback=function(e){var t=e.shift();return!cur.app||!cur.app.funcs||(cur.app.funcs[t]||setTimeout(function(){throw new Error("unsupported app method: "+t)},0),setTimeout(function(n){return n.app.funcs[t].apply(n.app,e)}.pbind(cur),0),!0)},window.detectUnityWebPlayer=function(e,t){var n=function(e,t){var n=0,i=0,o=ce("object",{type:"application/vnd.unity"},{visibility:"hidden"});bodyNode.appendChild(o),function(){if(void 0===o.GetPluginVersion)i++<10?setTimeout(arguments.callee,10):(bodyNode.removeChild(o),e(null));else{var r={};if(t)for(n=0;n<t.length;++n)r[t[n]]=o.GetUnityVersion(t[n]);r.plugin=o.GetPluginVersion(),bodyNode.removeChild(o),e(r)}}()},i=function(e){var t=0,n=void 0,i=void 0,o=void 0,r=void 0,a=void 0;if(e){var s=e.toLowerCase().match(/^(\d+)(?:\.(\d+)(?:\.(\d+)([dabfr])?(\d+)?)?)?$/);s&&s[1]&&(n=s[1],i=s[2]?s[2]:0,o=s[3]?s[3]:0,r=s[4]?s[4]:"r",a=s[5]?s[5]:0,t|=n/10%10<<28,t|=n%10<<24,t|=i%10<<20,t|=o%10<<16,t|={d:8192,a:16384,b:24576,f:32768,r:32768}[r],t|=a/100%10<<8,t|=a/10%10<<4,t|=a%10)}return t},o=!1,r=void 0;if(navigator.plugins.refresh(),void 0!==navigator.plugins&&navigator.plugins["Unity Player"]&&void 0!==navigator.mimeTypes&&navigator.mimeTypes["application/vnd.unity"]&&navigator.mimeTypes["application/vnd.unity"].enabledPlugin){if(o=!0,browser.safari&&/Mac OS X 10_6/.test(navigator.appVersion))return void n(function(t){t&&t.plugin||(o=!1),e(o,t)},t);if(browser.mac&&browser.chrome)return void n(function(t){t&&i(t.plugin)<=i("2.6.1f3")&&(o=!1),e(o,t)},t);if(t)return void n(function(t){e(o,t)},t)}else if(browser.msie){var a=!1;try{null!=ActiveXObject.prototype&&(a=!0)}catch(e){}if(a&&(!/win64/i.test(navigator.userAgent)||!/x64/i.test(navigator.userAgent)))try{var s=new ActiveXObject("UnityWebPlayer.UnityWebPlayer.1"),c=s.GetPluginVersion();if(t){r={};for(var l=0;l<t.length;++l)r[t[l]]=s.GetUnityVersion(t[l]);r.plugin=c}if(o=!0,"2.5.0f5"==c){var u=/Windows NT \d+\.\d+/.exec(navigator.userAgent);if(u&&u.length>0)parseFloat(u[0].split(" ")[2])>=6&&(o=!1)}}catch(e){}}e(o,r)},window.vkApp=function(e,t,n,i,o){if(n=n||{},t=t||{},window.parent&&window.parent!=window&&!t.checking&&!t.openapi&&!t.embed)return!1;var r=this;if(this.cont=ge(e),this.cont){if(n.hash=n.hash||"",-1!=n.hash.indexOf("#")){var a=n.hash.split("#").pop();(a||"").substr(0,1)==vk.navPrefix?n.hash="":n.hash=a}this.params=n,this.onReady=[],this.isOpenInLayer()&&this.onReady.push(this.checkExternalAppResponse.bind(this));var s="";if(1==t.type)if(void 0!==(void 0===o?"undefined":_typeof(o))&&o.length>0)s=t.src+"?"+o,n.hash&&(s+="#"+n.hash);else{s=t.src;var c=[];for(var l in n)"hash"==l?c.push(l+"="+encodeURIComponent(n[l])):c.push(l+"="+n[l]);s+=(-1==s.indexOf("?")?"?":"&")+c.join("&")}t.inlineApp&&(r.inlineApp=!0),r.options=extend({heightMax:4500},t),this.funcs={onInit:function(){return t.heightSync&&r.RPC.callMethod("getHeight",function(e){r.setHeight(e)}),r.inited||(r.inited=!0,i&&i(),r.inlineApp||r.onAppReady()),!0},ApiCall:function(e,t){var n=e.shift();r.api(n,e[0],t)},_getAppInfo:function(e){e([r.params.api_id,window.location.hash])},api:function(e,t,n){r.api(t,n,function(t){r.apiCallback(e,t)})},setHeight:function(e){r.setHeight(e)},scrollWindow:function(e,t){if(!r.inlineApp){var n=Math.max(e,0);t=intval(t),r.options.layer?r.params.is_vkpay_service&&window.wkLayerWrap&&animate(window.wkLayerWrap,{scrollTop:n},t):t&&t>0?(animate(htmlNode,{scrollTop:n},t),animate(bodyNode,{scrollTop:n},t)):window.scroll(0,n)}},scrollTop:function(e){var t=window.innerHeight||document.documentElement.clientHeight||bodyNode.clientHeight;cur.appTopOffset||(cur.appTopOffset=getXY(cur.app.cont)[1]);var n=0;window.curNotifier&&curNotifier.idle_manager&&curNotifier.idle_manager.is_idle&&(n=1),cur.app.runCallback("onScrollTop",parseInt(scrollGetY()),parseInt(t),parseInt(cur.appTopOffset),n)},scrollSubscribe:function(e){var t=r.isOpenInLayer(),n=void 0;n=t&&ge("wk_layer_wrap")||(browser.msie6?pageNode:window);var i=function(){var e=window.innerHeight||document.documentElement.clientHeight||bodyNode.clientHeight,i=t?function(){return n.scrollTop}:scrollGetY;r.runCallback("onScroll",parseInt(i()),parseInt(e))},o=function(){addEvent(n,"scroll",i)};o(),e&&i(),cur._back?(cur._back.show.push(o),cur._back.hide.push(function(){removeEvent(n,"scroll",i)})):cur.destroy.push(function(){removeEvent(n,"scroll",i)})},showRequestBox:function(e,t,n){showBox("al_apps.php",{act:"show_request_box",aid:cur.aid,message:t,uid:e,request_key:n},{params:{width:430,dark:1},onFail:function(e){return cur.app.runCallback("onRequestFail",e),!0}})},showInstallPushBox:function(){showBox("al_apps.php",{act:"show_install_push_box",aid:cur.aid},{params:{width:430,dark:1},onFail:function(e){return cur.app.runCallback("onInstallPushFail",e),!0}})},showProfilePhotoBox:function(e){showBox("al_apps.php",{act:"show_profile_photo_box",hash:e,aid:cur.aid},{params:{dark:1}})},setTitle:function(e){if(!r.inlineApp){e=e.replace(/[<>]+/gi,"");var t=cur.backLang;t=t||getLang("global_vkontakte"),setDocumentTitle(t+(e?" | "+e:""))}},resizeWindow:function(e,t,n){r.setWidth(e,n),r.setHeight(t,n),e=r.frame.clientWidth,t=r.frame.clientHeight,r.runCallback("onWindowResized",e,t)},getLocationProtocol:function(e){e(location.protocol)},setLocation:function(e,t){e=e.toString(),cur.appLoc=e,t&&cur.app.runCallback("onLocationChanged",e),nav.setLoc(extend(nav.objLoc,{"#":e}))},setNavigation:function(){},checkFlashSupport:function(e){(e=positive(e))||(e=9),browser.flash>=e?cur.app.runCallback("onCheckFlashSupportSuccess"):(cur.app.showDummy("no_flash"),cur.app.runCallback("onCheckFlashSupportFail"))},checkUnitySupport:function(){window.detectUnityWebPlayer(function(e){e?cur.app.runCallback("onCheckUnitySupportSuccess"):(cur.app.showDummy("no_unity"),cur.app.runCallback("onCheckUnitySupportFail"))})},showInstallBox:function(){if(cur.appUser)Apps.onAppAdded();else{if(cur.installBoxShown)return;cur.installBoxShown=!0,showBox("apps",{act:"install_box",aid:t.aid},{params:{dark:1}}).setOptions({onHide:function(){setTimeout(function(){cur.installBoxShown=!1},3e3)}})}},showSettingsBox:function(e){if(!cur.settingsBoxShown){cur.onSettingsEventSended=!1,cur.canSendOnSettingsEventFromHide=!0,cur.onSettingsChange=function(e,t){cur.onSettingsEventSended||(cur.onSettingsEventSended=!0,"ok"===e?cur.app.runCallback("onSettingsChanged",t):cur.app.runCallback("onSettingsCancel"))},cur.settingsBoxShown=!0;var n={act:"settings_box",aid:t.aid,mask:e};t.gid&&(n.gid=t.gid),showBox("apps",n,{params:{dark:1,width:550}}).setOptions({onHide:function(){cur.canSendOnSettingsEventFromHide&&cur.onSettingsChange("cancel"),setTimeout(function(){cur.settingsBoxShown=!1},3e3)}})}},showGroupSettingsBox:function(e){cur.settingsBoxShown||(cur.settingsBoxShown=!0,t.gid&&(cur.onSettingsEventSended=!1,cur.canSendOnSettingsEventFromHide=!0,cur.onSettingsChange=function(e,t,n){cur.onSettingsEventSended||(cur.onSettingsEventSended=!0,"ok"===e?cur.app.runCallback("onGroupSettingsChanged",t,n):cur.app.runCallback("onGroupSettingsCancel"))},showBox("apps",{act:"group_settings_box",aid:t.aid,mask:e,gid:t.gid},{params:{dark:1,width:550}}).setOptions({onHide:function(){cur.canSendOnSettingsEventFromHide&&cur.onSettingsChange("cancel"),setTimeout(function(){cur.settingsBoxShown=!1},3e3)}})))},showAppWidgetPreviewBox:function(e,n){if(!cur.appWidgetPreviewBox&&t.gid){cur.appWidgetPreviewBox=!0,cur.onAppWidgetPreviewFail=function(e){o(),cur.app.runCallback("onAppWidgetPreviewFail",e)},cur.onAppWidgetPreviewCancel=function(){o(),cur.app.runCallback("onAppWidgetPreviewCancel")},cur.onAppWidgetPreviewSuccess=function(){o(),cur.app.runCallback("onAppWidgetPreviewSuccess")};var i=showBox("apps",{act:"app_widget_preview_box",aid:t.aid,gid:t.gid,type:e,code:n},{params:{width:600,containerClass:"apps_app_widget_preview_box"},onDone:function(){i.setOptions({onHide:function(){isFunction(cur.onAppWidgetPreviewCancel)&&cur.onAppWidgetPreviewCancel()}})},onFail:function(e){return~e.indexOf("413 Request Entity Too Large")&&(e="413 Request Entity Too Large"),isFunction(cur.onAppWidgetPreviewFail)&&cur.onAppWidgetPreviewFail(e),!0}})}function o(){delete cur.onAppWidgetPreviewFail,delete cur.onAppWidgetPreviewCancel,delete cur.onAppWidgetPreviewSuccess,setTimeout(function(){delete cur.appWidgetPreviewBox},3e3)}},showAllowMessagesFromCommunityBox:function(e){if(!cur.allowMessagesFromCommunityBox){cur.allowMessagesFromCommunityBox=!0,cur.allowMessagesFromCommunityStatus="",cur.onAllowMessagesFromCommunity=function(e){"ok"===e?cur.app.runCallback("onAllowMessagesFromCommunity"):cur.app.runCallback("onAllowMessagesFromCommunityCancel")};var n={act:"allow_messages_from_community_box",aid:t.aid};t.gid?n.gid=t.gid:n.gid=e,showBox("apps",n,{params:{dark:1,width:550}}).setOptions({onHide:function(){cur.onAllowMessagesFromCommunity(cur.allowMessagesFromCommunityStatus),setTimeout(function(){cur.allowMessagesFromCommunityBox=!1},3e3)}})}},showInviteBox:function(){Apps.showInviteBox(t.aid,t.hash)},showPaymentBox:function(e){showBox("al_apps.php",{act:"show_payment_box",votes:e,aid:t.aid},{params:{dark:1}})},showLeadsPaymentBox:function(e){showBox("al_apps.php",{act:"show_payment_box",aid:t.aid,offers:isArray(e)?e.join(","):intval(e)||1},{params:{dark:1}})},showOrderBox:function(e){if("object"!=(void 0===e?"undefined":_typeof(e))){var n=Array.prototype.slice.call(arguments);e={},each(n,function(){var t=this.split("=");2==t.length&&(e[t[0]]=t[1])})}var i={};for(var o in e)Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.inArray)(o,["type","votes","offer_id","item","currency"])&&(i[o]=e[o]+"");"offers"==i.type&&isArray(i.offer_id)&&(i.offer_id=i.offer_id.join(",")),i.act="show_order_box",i.aid=t.aid,i.hash=t.hash,showBox("al_apps.php",i,{params:{dark:1},onFail:function(e){return!(void 0!==e||!t.embed)||(showFastBox({title:getLang("global_error")},e),!0)}}),cur.onAppOrderCancel=function(){cur.app.runCallback("onOrderCancel")},cur.onAppOrderSuccess=function(e){cur.app.runCallback("onOrderSuccess",e)},cur.onAppOrderFail=function(e){cur.app.runCallback("onOrderFail",e)}},showSubscriptionBox:function(e,n){if("object"!=(void 0===n?"undefined":_typeof(n))){var i=Array.prototype.slice.call(arguments);n={},each(i,function(){var e=this.split("=");2==e.length&&(n[e[0]]=e[1])})}var o={act:"show_subscription_box",aid:t.aid,action:e,hash:t.hash};"create"==o.action?o.item=n.item:"resume"!=o.action&&"cancel"!=o.action||(o.subscription_id=n.subscription_id),showBox("al_apps.php",o,{onFail:function(e){return showFastBox({title:getLang("global_error")},e),!0}}),cur.onSubscriptionCancel=function(){cur.app.runCallback("onSubscriptionCancel")},cur.onSubscriptionSuccess=function(e){cur.app.runCallback("onSubscriptionSuccess",e)},cur.onSubscriptionFail=function(e){cur.app.runCallback("onSubscriptionFail",e)}},showMerchantPaymentBox:function(e){return!1},showPortlet:function(e){return!1},addToMenu:function(){ajax.post("al_apps.php",{act:"add_left_menu",aid:cur.aid,hash:cur.app.options.hash},{onDone:function(e){Apps.updateLeftNav(e.left_nav),Apps.addToMenuErrorResolve(e),Apps.updateAddToMenuAction()}})},adsPublish:function(){AdsLight.handleEvent.apply(AdsLight,arguments)},callUser:function(e,t,n){showBox("al_apps.php",{act:"call_user",uid:e,key:t,aid:cur.aid,msg:n},{dark:1,onFail:function(e){return cur.app.runCallback("onCallFail",e),!0}})},debug:function(){debugLog(1==arguments.length?arguments[0]:arguments)},openExternalApp:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments[3],a=arguments[4];if(e){var s=["pay-to-user","transfer-to-user"],c=["pay-to-group","transfer-to-group"];if(n&&~["pay-to-user","pay-to-service","pay-to-group","transfer-to-user","transfer-to-group","open-service","add-card"].indexOf(n.action))if(!~s.indexOf(n.action)||n.user_id)if(!~c.indexOf(n.action)||n.group_id)if("open-service"!==n.action||r.params.is_vkpay){var l="open-service"!==n.action,u="",d=[];if(n&&(n.aid=t.aid,u=e+"?"+(d=r.getQueryParts(n)).join("&")),u){var p=void 0,h=!browser.mozilla&&!browser.msi&&!browser.msie_edge,f=!1;if("open-service"===n.action){var g=/^app(\d+)(?:_-(\d+))?$/.exec(e),v=r.options.vkpay_not_layer_services||[],w=positive(g[1]);g&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.inArray)(w,v)&&(f=!0,h&&(p=window.open("","_blank")))}ajax.post("al_apps.php",{act:"open_external_app",url:e,q:d.join("&"),aid:t.aid},{onDone:function(e,t){if(t){if("open-service"===n.action&&f)return e=decodeURIComponent(e),p?void(p.location.href="/"+e):void nav.go("/"+e);r.openAppInLayer(e,function(){cur.onExternalAppDone&&(cur.onExternalAppResults?r.checkExternalAppResponse():r.runCallback("onExternalAppClose"),cur.onExternalAppDone=null)},l),cur.onExternalAppDone=function(e,t){t=!!t,this.isOpenInLayer()||t?cur.onExternalAppResults={api_id:this.params.api_id,result:e}:(cur.onExternalAppResults=null,this.runCallback("onExternalAppDone",e)),t||(cur.onExternalAppDone=null,window.WkView&&WkView.hide(!1,!0))}.bind(r)}},onFail:function(e){try{e=JSON.parse(e)}catch(t){e={error:{error_msg:"Unknown error",error_code:1}}}return p&&p.close(),i?o(e.error):r.runCallback("onExternalAppFail",e.error),!0}})}}else i?a({error_msg:"Invalid action",error_code:100}):r.runCallback("onExternalAppFail",{error_msg:"Invalid action",error_code:100});else i?a({error_msg:"Missing required param group_id",error_code:100}):r.runCallback("onExternalAppFail",{error_msg:"Missing required param group_id",error_code:100});else i?a({error_msg:"Missing required param user_id",error_code:100}):r.runCallback("onExternalAppFail",{error_msg:"Missing required param user_id",error_code:100});else i?a({error_msg:"Invalid action",error_code:100}):r.runCallback("onExternalAppFail",{error_msg:"Invalid action",error_code:100})}},externalAppDone:function(e,t){cur.onExternalAppDone?cur.onExternalAppDone(e,t):t||window.WkView&&WkView.hide(!1,!0)},externalAppFail:function(e){if(!Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.isObject)(e))try{e=JSON.parse(e)}catch(t){e={error:{error_msg:"Unknown error",error_code:1}}}var t=r.getOpenerApp();t&&t.isOpenInLayer()?cur.onExternalAppResults={api_id:t.params.api_id,error:e.error}:t&&t.runCallback("onExternalAppFail",e.error),cur.onExternalAppDone=null,window.WkView&&WkView.hide(!1,!0)},closeExternalApp:function(){Apps.closeExternalApp()},sendStats:function(e){(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.isObject)(e)||isArray(e))&&(e=JSON.stringify(e)),ajax.post("al_apps.php",{act:"save_stats",data:e,hash:cur.app.params.stats_hash,app_id:cur.aid},{onDone:function(){r.runCallback("onSendStatsDone")},onFail:function(){return r.runCallback("onSendStatsFail"),!0}})},showWallPostBox:function(e,t,n){if(e.message||e.attachments&&e.attachments.length)r.api("wall.post",e,function(e){e.error?n?n(e.error):this.runCallback("onShowWallPostBoxCancel",e.error):t?t({post_id:e.response.post_id}):this.runCallback("onShowWallPostBoxDone")}.bind(r));else{var i={error_code:100,error_msg:"One of the parameters specified was missing or invalid"};n?n(i):r.runCallback("onShowWallPostBoxCancel",i)}},enableBodyScroll:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){r.params.is_vkpay_service&&cur.bodyScrollDisabled&&(enableBodyScroll(),cur.bodyScrollDisabled=!1,r.runCallback("onBodyScrollDisabled"))}),disableBodyScroll:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){r.params.is_vkpay_service&&!cur.bodyScrollDisabled&&(cur.destroy.push(function(){cur.bodyScrollDisabled&&enableBodyScroll()}),disableBodyScroll(),cur.bodyScrollDisabled=!0,r.runCallback("onBodyScrollEnabled"))}),startHandleWheelEvent:function(){r.params.is_vkpay_service&&r.startHandleWheelEvent()},stopHandleWheelEvent:function(){r.params.is_vkpay_service&&r.stopHandleWheelEvent()},startHandleDeviceOrientation:function(){r.runCallback("onDeviceOrientationNotSupported")}},n.widget?(r.options.type=1,r.options.widget=!0):(1===this.options.type&&this.params.is_vkpay_service||renderFlash(ge("flash_api_external_cont"),{url:"/swf/api_external.swf",id:"flash_api_external",width:1,height:1,preventhide:1,version:9},{allowFullScreen:!0,allowscriptaccess:"always",allownetworking:"all",wmode:"opaque"},{debug:n.debug?1:0,lc_name:n.lc_name}),r.externalFrame=ge("flash_api_external"));var u=r.options.wmode||"opaque";if(r.options.no_init)return!1;var d=1,p=void 0;switch(r.options.type){case 1:r.options.layer?this.RPC=new fastXDM.Server(this.funcs,void 0,{layer:1}):this.RPC=new fastXDM.Server(this.funcs);var h={src:s,width:"100%",overflow:"hidden"};r.options.vkApp||(h.scrolling="no"),r.options.widget||(h.height=r.options.height+"px");this.frame=this.RPC.append(r.cont,h,'webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="true" allow="geolocation; microphone; camera; autoplay;"');break;case 2:debugLog("is wrapper"),p={url:t.src,id:"flash_app",width:r.options.width,height:r.options.height,version:10},"opaque"==u&&(p.preventhide=1),d=renderFlash(r.cont,p,{allowFullScreen:!0,allowscriptaccess:"never",allowFullScreenInteractive:"true",allownetworking:"all",bgcolor:"#F7F7F7",wmode:u},n),r.frame=ge("flash_app");break;case 3:p={url:t.src,id:"flash_app",width:r.options.width,height:r.options.height,version:9},"opaque"==u&&(p.preventhide=1),d=renderFlash(r.cont,p,{allowFullScreen:!0,allownetworking:"all",allowscriptaccess:"never",allowFullScreenInteractive:"true",wmode:u},n),r.frame=ge("flash_app")}d||r.showDummy("no_flash"),n.widget&&setTimeout(function(){r.inited||show("app_connect_error")},8e3),cur.destroy.push(function(){this.RPC&&this.RPC.destroy()}.bind(this))}},vkApp.prototype.boxApp=function(){},vkApp.prototype.onAppReady=function(){for(var e in this.onReady)this.onReady.hasOwnProperty(e)&&this.onReady[e]()},vkApp.prototype.checkExternalAppResponse=function(){cur.onExternalAppResults&&this.params.api_id===cur.onExternalAppResults.api_id&&(cur.onExternalAppResults.result&&this.runCallback("onExternalAppDone",cur.onExternalAppResults.result),cur.onExternalAppResults.error&&this.runCallback("onExternalAppFail",cur.onExternalAppResults.error)),cur.onExternalAppResults=null},vkApp.prototype.runCallback=function(){var e=Array.prototype.slice.call(arguments),t=e[0],n="customEvent",i=void 0;switch(-1!=["onLocationChanged","onMerchantPaymentSuccess","onBalanceChanged","onWindowResized","onSettingsChanged","onGroupSettingsChanged","onAppWidgetPreviewFail","onAppWidgetPreviewCancel","onAppWidgetPreviewSuccess","onCheckFlashSupportSuccess","onCheckFlashSupportFail","onCheckUnitySupportSuccess","onCheckUnitySupportFail"].indexOf(t)?(n=t,i=e.slice(1)):i=e.slice(),this.options.type){case 1:if(this.RPC.callMethod("runCallback",e),!this.options.widget&&!browser.iphone&&!browser.ipad)try{this.externalFrame[n](i)}catch(e){}break;case 2:case 3:try{this.externalFrame[n](i)}catch(e){}}},vkApp.prototype.apiCallback=function(e,t){try{this.externalFrame.apiCallback(e,t)}catch(e){}},vkApp.prototype.setHeight=function(e,t){if(e){this.inlineApp&&e>this.options.heightMax&&!this.params.is_vkpay_service&&(e=this.options.heightMax);var n=e+"px";this.frame.style.height=n,this.options.boxed||(this.cont.style.height=n),this.options.layer&&WkView.onResize(),this.options.onResize&&this.options.onResize()}},vkApp.prototype.isVkpayTransferLayer=function(){return!!this.params.is_vkpay_service&&(this.options.openapi?!!domCA(this.cont,".vkPayOpenApiBox_transfer"):!!domCA(this.cont,".vkpay_transfer"))},vkApp.prototype.setWidth=function(e,t){var n=165;e&&!this.inlineApp&&cur.app&&(e=Math.min(Math.max(e,600),1e3),this.options.layout_width&&(n=this.options.layout_width-e),this.isVkpayTransferLayer()&&t&&(this.cont.style.maxWidth="none",this.cont.style.minWidth="none"),this.options.layer?WkView.onResize():window.handlePageView&&handlePageView({noleftmenu:vk.noleftmenu,nobottommenu:vk.nobottommenu,notopmenu:vk.notopmenu,body_class:vk.body_class,staticheader:vk.staticheader,no_ads:vk.no_ads,ad_preview:vk.ad_preview,top_home_link_class:vk.top_home_link_class,width:Math.max(e,625)+n}),this.frame.style.width=this.cont.style.width=e+"px")},vkApp.prototype.showProgress=function(){addClass(this.cont,"loading"),this.loaderEl=showProgress(this.cont,"","pr_big app_container_progress",!0)},vkApp.prototype.hideProgress=function(){removeClass(this.cont,"loading"),this.loaderEl&&re(this.loaderEl)},vkApp.prototype.showDummy=function(e){if(this.cont&&~["no_flash","no_unity"].indexOf(e)){var t={act:e};"no_flash"!==e||browser.iphone||browser.ipad?"no_unity"!==e||browser.mobile||(t.screen=browser.msie||browser.amigo||browser.mac&&browser.safari?"install":"browser"):t.screen="install",ajax.post("al_apps.php",t,{onDone:function(e){cur.app&&(addClass(cur.app.cont,"dummy"),val(cur.app.cont,e))},showProgress:this.showProgress.bind(this),hideProgress:this.hideProgress.bind(this)})}},vkApp.prototype.balanceUpdated=function(e){this.runCallback("onBalanceChanged",e)},vkApp.prototype.checkMethod=function(e,t,n){var i=e.toLowerCase();if("wall.post"==i||"activity.set"==i){var o=t["wall.post"==i?"message":"text"];o||(o=""),t.attachments=this.getValidPostAttachments(t.attachments||t.attachment),showBox("apps",{act:"wall_post_box",aid:this.options.aid,post_id:t.post_id,owner_id:t.owner_id,lat:t.lat,long:t.long,place_id:t.place_id,from_group:t.from_group,publish_date:t.publish_date,signed:t.signed,attachments:t.attachments,text:o,method:i},{params:{width:"430px",dark:1},onFail:function(e){e=e||"Unknown network error occurred",n&&n({error:{error_code:1,error_message:e}})}});var r=this;return cur.apiWallPost=function(i,o){o?n&&n({error:o}):r.api(e,extend(t,{method_access:i}),n)},!1}return!0},vkApp.prototype.checkMethodResult=function(e,t,n,i){switch(e){case"photos.saveProfilePhoto":if(!n.error)return cur.profilePhotoBoxCallback=function(e){i(e?{response:{photo_src:n.response.photo_src}}:{error:{error_code:10007,error_msg:"Operation denied by user"}}),window.profilePhotoBoxCallback=!1},cur.app.funcs.showProfilePhotoBox(n.response.photo_hash),!1}return!0},vkApp.prototype.initClientExternalApp=function(){this.clientRpc=new fastXDM.Client({},{safe:!0}),cur.onExternalAppDone=function(e,t){t=!!t,this.clientRpc.callMethod("externalAppDone",e,t)}.bind(this)},vkApp.prototype.onLocChanged=function(e){e||(e=""),cur.appLoc!=e&&(cur.appLoc=e,this.runCallback("onLocationChanged",e))},vkApp.prototype.api=function(method,inputParams,callback,captcha){var self=this;if(2==arguments.length&&(callback=params,inputParams={}),inputParams||(inputParams={}),captcha||inputParams.method_access||inputParams.method_force||this.checkMethod(method,inputParams,callback)){delete inputParams.callback,delete inputParams.access_token;var params={v:"3.0",api_id:this.params.api_id,method:method,format:"json",rnd:parseInt(1e4*Math.random())};if(inputParams)for(var i in inputParams)inputParams.hasOwnProperty(i)&&(i=trim(i),/^(rnd|format|api[\s.\[_]id|method|callback|access[\s.\[_]token)(\s*\[|$)/.test(i)||(params[i]=inputParams[i]));var lParams=[];for(var _i2 in params)params.hasOwnProperty(_i2)&&lParams.push([_i2,params[_i2]]);lParams.sort(sName);var sig=this.params.viewer_id;for(var _i3 in lParams)lParams.hasOwnProperty(_i3)&&(sig+=lParams[_i3][0]+"="+lParams[_i3][1]);sig+=this.params.secret,params.sid=this.params.sid,stManager.add("md5.js",function(){params.sig=window.MD5(sig);var done=function done(text){var response=eval("("+text+")");if(response.error&&14==response.error.error_code)cur.appCaptcha=showCaptchaBox(response.error.captcha_sid,0,!1,{onSubmit:function(e,t){inputParams.captcha_sid=e,inputParams.captcha_key=t,self.api(method,inputParams,callback,!0),cur.appCaptcha.setOptions({onHide:function(){}}).hide()},onHide:function(){callback(response)},imgSrc:response.error.captcha_img});else{if(captcha&&cur.appCaptcha.setOptions({onHide:function(){}}).hide(),!self.checkMethodResult(method,inputParams,response,callback))return;callback&&callback(response)}},fail=function(){callback&&callback({error:{error_code:1,error_message:"Unknown network error occurred"}}),debugLog("Ajax fail")};ajax.plainpost(self.params.api_script||"/api.php",params,done,fail)})}function sName(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:0}},vkApp.prototype.getValidPostAttachments=function(e){var t=/(^https?:\/\/)|(^(poll|album|photo|video|doc|audio|page|note)-?\d+_-?\d+)$/,n=[];return e=e||[],isString(e)&&(e=e.split(",")),each(e,function(){var e=this.trim();t.test(e)&&n.push(e)}),n.join(",")},vkApp.prototype.startHandleWheelEvent=function(){var e=this;this._wheelEventListener||stManager.add(["ui_common.js"],function(){e._wheelEventListener=function(e){var t=uiScroll.scrollEventDelta(e);cur.app.runCallback("onWheel",t,document.documentElement.clientHeight)},addEvent(window,browserFeatures.wheelEvent,e._wheelEventListener),cur.destroy.push(function(){e._wheelEventListener&&removeEvent(window,browserFeatures.wheelEvent,e._wheelEventListener)})})},vkApp.prototype.stopHandleWheelEvent=function(){this._wheelEventListener&&(removeEvent(window,"wheel",this._wheelEventListener),this._wheelEventListener=null)},vkApp.prototype.getQueryParts=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var i="";void 0!==e[n]&&(i="object"===_typeof(e[n])?encodeURIComponent(JSON.stringify(e[n])):encodeURIComponent(e[n])),t.push(encodeURIComponent(n)+"="+i)}return t},vkApp.prototype.openAppInLayer=function(e,t,n,i){cur.openerAppsQueue=cur.openerAppsQueue||[],cur.openerAppsQueue.push(this),i=i||{},showWiki({w:e},null,null,extend(i,{queue:1,onHide:function(){cur.app=cur.openerAppsQueue.pop(),t&&t()},noClickHide:n}))},vkApp.prototype.getOpenerApp=function(){return cur.openerAppsQueue&&cur.openerAppsQueue[cur.openerAppsQueue.length-1]},vkApp.prototype.isOpenInLayer=function(){return"layer"===this.params.source},window.AppsSlider=function(e){if(this.options=extend({inner:null,outer:null,next:null,prev:null,infinite:!0,slideshowDuration:4e3,animationDuration:500,isVkApp:!1},e||{}),this.required=null,this.current=null,this.slideNext=null,this.slidePrev=null,this.slideCurrent=null,this.hasVideoSlides=!1,this.videoPlayer=null,this._handlerInst=null,this._arrowNextHandler=null,this._arrowPrevtHandler=null,this.options.outer&&this.options.inner&&(this.outer=ge(this.options.outer),this.inner=ge(this.options.inner),this.outer&&this.inner)){if(this.slideshow=!1,this.animation={stop:function(){}},this.slideshowTimeout=null,this.interacted=!1,this.slides=domChildren(this.inner),this.options.infinite){if(!this.slides.length)return void re(this.outer);if(this.slides.length<3)for(var t=null,n=0;this.slides.length<4;)t=this.slides[n++].cloneNode(!0),this.slides.push(t),this.inner.appendChild(t)}(this.arrowNext=ge(this.options.next))&&(this._arrowNextHandler=this.next.bind(this),addEvent(this.arrowNext,"mousedown",this._arrowNextHandler)),(this.arrowPrev=ge(this.options.prev))&&(this._arrowPrevtHandler=this.prev.bind(this),addEvent(this.arrowPrev,"mousedown",this._arrowPrevtHandler)),this.inited=!1,this.init()}},AppsSlider.prototype={init:function(){if(void 0!==this.inited)return!!this.inited||(0!==this.outer.offsetWidth&&0!==this.slides[0].offsetWidth?(this.widthOuter=this.outer.offsetWidth,this.widthInner=this.inner.offsetWidth,this.widthSlide=this.widthInner/this.slides.length,this.offsetInner=this.inner.offsetLeft,this.widthSide=(this.widthOuter-this.widthSlide)/2,this.indexNext=this.slides.length-1,this.indexPrev=0,this.indexMargin=(this.slides.length-1)/2|0,this.indexRequired=this.indexCurrent=this.getIndex(),this.highlight(),this.rearrange(),this._initVideoSlides(),this.slideshow&&!this.slideshowTimeout&&this.slideshowStart(),this.inited=!0):void 0)},highlight:function(){this.slideHighlighted&&(removeClass(this.slideHighlighted,"selected"),this.slideHighlighted=null,this.indexHighlighted=null),this.indexHighlighted!==this.indexCurrent&&(this.indexHighlighted=this.indexCurrent,this.slideHighlighted=this.slides[this.getIndex(this.indexCurrent)],addClass(this.slideHighlighted,"selected"))},handler:function(e){var t=e.target&&(e.target===this.outer||this.outer.contains(e.target));this.interacted!=t&&(this.interacted=t,t?(this.slideshowInterrupted=this.slideshow,this.slideshowStop()):(this.slideshow=this.slideshowInterrupted,this.slideshow&&this.slideshowStart()))},slideshowStart:function(){this.slideshow=!0,this.interacted||this._videosIsPlay||(this.slideshowStop(),this.slideshow=!0,this.slideshowTimeout=setTimeout(function(){this.slideshowTimeout=null,vk.rtl?this.indexRequired--:this.indexRequired++,this.serve()}.bind(this),this.options.slideshowDuration))},slideshowStop:function(){this.slideshow=!1,this.slideshowTimeout&&(clearTimeout(this.slideshowTimeout),this.slideshowTimeout=null)},addHandler:function(){this.init()&&(this.removeHandler(),this._handlerInst=this.handler.bind(this),addEvent(document,"mousemove",this._handlerInst))},removeHandler:function(){this._handlerInst&&removeEvent(document,"mousemove",this._handlerInst)},removeAllHandlers:function(){this.removeHandler(),this._arrowNextHandler&&removeEvent(this.arrowNext,"mousemove",this._arrowNextHandler),this._arrowPrevtHandler&&removeEvent(this.arrowPrev,"mousemove",this._arrowPrevtHandler)},requireIndex:function(e){this.indexRequired=this.getIndex(e||0),this.serve()},next:function(){if(this.init()){if(!this.options.infinite&&this.indexRequired>=this.slides.length-1)return;this.indexRequired++,this.serve()}},last:function(){this.indexRequired=this.slides.length-1,this.serve()},prev:function(){if(this.init()){if(!this.options.infinite&&this.indexRequired<1)return;this.indexRequired--,this.serve()}},getIndex:function(e,t){return void 0!==e?(e=e%this.slides.length+(e<0?this.slides.length:0))===this.slides.length?0:e:(e=(this.offsetInner-this.widthSide)/-this.widthSlide,t?e:Math.round(e))},serve:function(){if(this.init()){var e=this.getIndex(this.indexRequired),t=this.required!=e,n=-(this.indexRequired*this.widthSlide-(this.widthOuter-this.widthSlide)/2);this.required=e,t&&isFunction(this.options.onRequired)&&this.options.onRequired(),this.options.infinite||(this.indexRequired=this.required),this.animation.stop(),this.animation=new Fx.Base({style:{}},{duration:this.options.animationDuration,transition:Fx.Transitions.easeOutCubic,onComplete:this.served.bind(this),onStep:function(e){this.offsetInner=e.left,setStyle(this.inner,"left",this.offsetInner);var t=this.indexCurrent;this.indexCurrent=this.getIndex(),t!==this.indexCurrent&&(this.indexCurrent===this.indexRequired&&this.highlight(),this.rearrange(),isFunction(this.options.onChange)&&this.options.onChange())}.bind(this)}),this.animation.start({left:this.offsetInner},{left:n})}},served:function(){var e=this.indexCurrent-this.getIndex(this.indexCurrent);e>30&&(this.indexPrev=0,this.indexNext=this.slides.length-1,this.indexCurrent-=e,this.indexRequired-=e,this.offsetInner=-(this.indexRequired*this.widthSlide-(this.widthOuter-this.widthSlide)/2),this.inner.style.left=this.offsetInner+"px",each(this.slides,function(e,t){t.style.left=0})),this.hasVideoSlides&&this._serveVideoSlide(),this.rearrange(),isFunction(this.options.onSlide)&&this.options.onSlide(),this.slideshow&&this.slideshowStart()},rearrange:function(){if(this.options.infinite){for(;this.indexCurrent>=this.indexNext-this.indexMargin;){var e=this.getIndex(this.indexNext);this.slides[e].style.left=(this.indexNext-e)*this.widthSlide+"px",this.indexNext++,this.indexPrev++}for(;this.indexCurrent<=this.indexPrev+this.indexMargin;){var t=this.getIndex(this.indexPrev);this.slides[t].style.left=(this.indexPrev-t)*this.widthSlide+"px",this.indexPrev--,this.indexNext--}}this.current=this.getIndex(this.indexCurrent),this.slideNext=this.slides[this.options.infinite?this.getIndex(this.indexCurrent+1):this.indexCurrent+1]||null,this.slidePrev=this.slides[this.options.infinite?this.getIndex(this.indexCurrent-1):this.indexCurrent-1]||null,this.slideCurrent=this.slides[this.current]},update:function(){this.inited=!1,this.slides=domChildren(this.inner),this.init()},destroy:function(){this.slideshowStop(),this.removeAllHandlers(),this.hasVideoSlides=!1},getCurrentSlide:function(){return this.slides[this.current]},_initVideoSlides:function(){var e=this;each(this.slides,function(){if(domData(this,"video"))return e.hasVideoSlides=!0,!1}),e.hasVideoSlides&&(this._preloadVideos(),this._serveVideoSlide())},_isPreloadedVideo:function(e){var t=!1;return each(ajaxCache,function(n,i){if(0==n.indexOf("/al_video.php?act=show_inline")&&n.indexOf("&video="+e)>0)return t=!0,!1}),t},_onVideoPreloaded:function(e,t){if(e){var n=t[3].player.params[0];VideoPlayer.preload(n)}},_preloadVideos:function(){var e=this;each(this.slides,function(){if(domData(this,"video")){var t=e._getVideoParams(this);e._isPreloadedVideo(t.video)||loadInlineVideo(t,e._onVideoPreloaded,!0)}})},_onVideoStop:function(){this._videosIsPlay=!1,this.interacted=!1,this.slideshowStart()},_onVideoStart:function(){this._videosIsPlay=!0,this.interacted=!0,this.slideshowStop()},_onVideoLoaded:function(e,t){this.videoPlayer=t,t.on("media.playing",function(){this.getCurrentSlide()===e?this._onVideoStart():(t.seekTo(0),t.pause())}.bind(this)),t.on("media.ended",function(){this._onVideoStop(),this.next()}.bind(this)),t.on("media.error",function(){this._onVideoStop(),this.next()}.bind(this)),t.on("media.pause",this._onVideoStop.bind(this)),t.on("_destroy",this._onVideoStop.bind(this))},_getVideoParams:function(e){return{video:domData(e,"video"),list:domData(e,"hash"),autoplay:1,from_autoplay:1,module:"apps_slider",addParams:{from_autoplay:1},no_progress:1,cache:1}},_serveVideoSlide:function(){var e=this.getCurrentSlide(),t=void 0,n=void 0,i=void 0,o=void 0;domData(e,"video")?(t=geByTag1("img",e),n=domData(t,"loading"),i=domData(t,"playing"),n||i?this._canUseVideo()&&this.videoPlayer&&this.videoPlayer.play():((o=this._getVideoParams(e)).onLoaded=this._onVideoLoaded.bind(this,e),this._canUseVideo()&&showInlineVideo(o.video,o.list,o,!1,t))):this._canUseVideo()&&this.videoPlayer&&this.videoPlayer.pause()},_canUseVideo:function(){var e=window.wkcur&&window.wkcur.shown&&window.wkLayerWrap&&isVisible(window.wkLayerWrap)||window.Videoview.isLayerShown();if(e)return!1;var t=cur.videoInlinePlayer?cur.videoInlinePlayer.getState():"unknown",n=~["paused","ended"].indexOf(t);return!cur.videoInlinePlayer||cur.videoInlinePlayer===this.videoPlayer||n&&!e}},window.Apps=window.Apps||{optionHiddenClass:"apps_hidden",optionLoadingClass:"loading",address:"apps",init:function init(obj,appTpl){var _this3=this;if(extend(cur,{module:"apps",preventFastBack:!1,aTabs:ge("apps_top_tabs"),aSubTabs:geByClass1("_apps_top_subtabs"),aSearch:ge("s_search"),aSearchWrap:ge("apps_search"),aWrap:ge("apps_wrap"),aSummary:ge("apps_summary"),aSummaryCounter:ge("apps_summary_counter"),lShowMoreButton:ge("apps_list_show_more"),lPreload:ge("apps_list_preload"),lContent:ge("apps_list_content"),fWrap:ge("apps_feed"),fShowMoreButton:ge("apps_feed_show_more"),rNotCounter:ge("apps_recent_notifications_counter"),rNotWrap:ge("apps_recent_notifications_wrap"),rNotNoContent:ge("apps_recent_notifications_no_content"),rNotBlackList:ge("apps_recent_notifications_black_list"),rNotShowMoreButton:ge("apps_recent_notifications_show_more"),rAppsWrap:ge("apps_recent_apps_wrap"),rAppsShowMoreButton:ge("apps_recent_more"),rAppsNoContent:ge("apps_recent_apps_no_content"),onSilentLoad:{},apps:{},deletedApps:{},appTpl:appTpl||function(){return""}}),extend(cur,obj),cur.defaultCount=cur.shownApps,"notifications"===nav.objLoc.act&&(delete nav.objLoc.act,nav.objLoc.tab="notifications",nav.setLoc(nav.objLoc)),this.setHistoryBackRules(),this.searchLoadFromAddressBar(),cur.aSearch&&(uiSearch["list"===cur.section?"setFixed":"setStatic"](cur.aSearch),uiSearch.startEvents(cur.aSearch)),setTimeout(function(){this.scrollCheckBinded=this.scrollCheck.bind(this),this.sliderInit(),this.feedInit(),this.notificationsInit(),cur.scrollToHeader&&(setTimeout(this.scrollToHeader.bind(this),100),delete cur.scrollToHeader),cur.scrollToTop&&(scrollToTop(),delete cur.scrollToTop),this.startEvents(),cur.destroy.push(function(e){setTimeout(function(){var t=void 0;e.fScrollbar&&cur.fScrollbar!=e.fScrollbar&&(t=!1,globalHistory.forEach(function(n){n.cur!=e&&n.cur.fScrollbar==e.fScrollbar&&(t=!0)}),t||e.fScrollbar.destroy()),e.rNotScrollbar&&cur.rNotScrollbar!=e.rNotScrollbar&&(t=!1,globalHistory.forEach(function(n){n.cur!=e&&n.cur.rNotScrollbar==e.rNotScrollbar&&(t=!0)}),t||e.rNotScrollbar.destroy())},0),cur.featuredSlider&&(cur.featuredSlider.destroy(),cur.featuredSlider=null)}.pbind(cur)),cur.destroy.push(this.stopEvents.bind(this)),cur.aSearch&&uiSearch.scrollResize(cur.aSearch)}.bind(this),0),cur.silent_mode){cur.silent=!0,cur.preload&&(cur.leavePreloadedHeader||delete cur.preload.header,cur.leavePreloadedBefore||delete cur.preload.before);var query={act:"load_apps_silent",gid:cur.gid,oid:cur.oid,header:cur.leavePreloadedHeader?0:1,before:cur.leavePreloadedBefore?0:1,section:cur.section,preload:1,preloaded:[]},prop=null;for(prop in cur.preload=cur.preload||{},cur.preload)cur.preload.hasOwnProperty(prop)&&query.preloaded.push(prop);ajax.post(this.address,query,{cache:1,local:1,onDone:this.withFastBackCheck(function(json,preload,preloadBefore,preloadHeader){cur.preload=extend(cur.preload||{},preload),cur.preload.before=preloadBefore,cur.preload.header=preloadHeader,json=eval("("+json+")"),cur.curList="all",cur.appsList=json&&json[cur.curList]?json:{all:[]},cur.sectionCount=cur.appsList[cur.curList].length,void 0===cur.searchOffset&&(cur.searchOffset=0),json?_this3.indexAll(function(){return _this3.onSilentLoad()}):_this3.onSilentLoad()})})}},onSilentLoad:function(){if(cur.silent=!1,cur.onSilentLoad)for(var e in cur.onSilentLoad)cur.onSilentLoad.hasOwnProperty(e)&&isFunction(cur.onSilentLoad[e])&&cur.onSilentLoad[e]()},withFastBackCheck:function(e){cur.preventFastBack=!0;var t=cur;return function(){cur===t&&(cur.preventFastBack=!1,e.apply(null,Array.prototype.slice.call(arguments)))}},startEvents:function(){addEvent(window,"scroll",this.scrollCheckBinded),addEvent(window,"resize",this.scrollCheckBinded),this.initUpdates(),this.scrollCheck(),this.sliderStart()},stopEvents:function(){removeEvent(window,"scroll",this.scrollCheckBinded),removeEvent(window,"resize",this.scrollCheckBinded),this.stopUpdates(),this.sliderStop()},isSection:function(){for(var e=arguments.length;e--;)if(arguments[e]===cur.section)return!0;return!1},isDelayedOnSilentLoad:function e(t,n){if(cur.silent)return e.count=e.count||0,e.count++,cur.onSilentLoad[t||"key_"+e.count]=n,!0},handlePageCount:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return handlePageCount("ap",e)}),incomingCall:function(e){var t=this;stManager.add(["notifier.js","notifier.css","apps.css","call.css"],function(){var n=se('<div><div class="call_apps_wrap clear_fix">'+e+"</div></div>"),i={movable:geByClass1("call_invitation_wrap",n,"div"),startLeft:parseInt((window.innerWidth-224)/2)+"px",startTop:parseInt((window.innerHeight-404)/2)+"px",startWidth:224,startHeight:404,resize:!1,onBeforeHide:function(){},onDragEnd:function(e,t){},onResize:function(e,t){}};t.appCall&&t.appCall.close(),t.appCall=new RBox(n,i)}),window.Notifier&&Notifier.setRecvClbk("apps_call_hide",function(){t.appCall&&(t.appCall.close(),t.appCall=!1)})},callApprove:function(e){window.Notifier&&Notifier.lcSend("apps_call_hide",(new Date).getTime()),this.appCall&&(this.appCall.close(),this.appCall=!1),nav.go(e)},callReject:function(){window.Notifier&&Notifier.lcSend("apps_call_hide",(new Date).getTime()),this.callOnReject()},callOnReject:function(){this.appCall&&(this.appCall.close(),this.appCall=!1),ajax.post("/al_apps.php",{act:"do_call_reject"},{onDone:function(){}})},editBlacklist:function(){return showBox(this.address,{act:"blacklist_box",height:lastWindowHeight},{stat:["privacy.css","indexer.js"]}),!1},blacklistInit:function(e,t,n){n=n||{};var i=geByClass1("apps_blacklist_wrap",e.bodyNode),o=geByClass1("apps_blacklist",e.bodyNode),r=geByClass1("olist_more",e.bodyNode,"a"),a={},s=new vkIndexer(t,function(e){return e[1]});e.setOptions({width:560,bodyStyle:"padding: 0px"}),e.removeButtons().addButton(getLang("global_close"),function(){e.hide(200)},"yes"),o.parentNode.style.height=n.boxHeight+"px";var c=ge("apps_blacklist_filter");n.nofocus||setTimeout(elfocus.pbind(c),100);var l=data(c,"opts");function u(){if(i.scrollTop>0?addClass(e.bodyNode.parentNode,"olist_topsh"):removeClass(e.bodyNode.parentNode,"olist_topsh"),i.scrollTop+(i.offsetHeight||i.clientHeight)<o.scrollHeight?addClass(e.bodyNode.parentNode,"olist_botsh"):removeClass(e.bodyNode.parentNode,"olist_botsh"),r&&r.offsetTop&&r.onclick){var t=r.offsetTop;o.scrollTop+(o.offsetHeight||o.clientHeight)+100>=t&&r.onclick()}}function d(i,a){var c,l=void 0,u=(a=a||0)?60:120;i&&(i=clean(i).replace(/\u2013|\u2014/g,"-")),l=i?s.search(i):t,c=n.tpl;var p=l.length;l=l.slice(a,a+u);var h=[],f=void 0;if(i){var g=escapeRE(i),v=parseLatin(i);null!=v&&(g=g+"|"+escapeRE(v)),f=new RegExp("(?![^&;]+;)(?!<[^<>]*)((\\(*)("+g+"))(?![^<>]*>)(?![^&;]+;)","gi")}each(l,function(){h.push(rs(c,function(e,t,n,i){var o=e[1];if(t){o=-1==t.indexOf(" ")?o.split(" "):[o];var r="";for(var a in o)o.hasOwnProperty(a)&&(r+=(a>0?" ":"")+o[a].replace(i,"$2<em>$3</em>"));o=r}return{id:e[0],name:o,photo:e[2],link:e[3]||(e[0]>0?"id"+e[0]:"app"+(1e9-e[0]))}}(this,i,0,f)))}),a||h.length||h.push('<div class="no_rows">'+(i?getLang("global_search_not_found").replace("{search}",clean(i)):n.lang.apps_blacklist_empty)+"</div>"),re(r),h=h.join(" "),a?o.appendChild(cf(h)):val(o,h),p>a+u&&(o.appendChild(r),r.onclick=function(e){return d(i,a+u),cancelEvent(e)}),e&&e.scroll&&e.scroll.update(!1,!0)}data(c,"opts",extend(l,{onChange:d})),r&&(isVisible(r)?r.onclick=function(e){return d("",60),cancelEvent(e)}:(re(r),show(r))),addEvent(o,"click",function(n){var i=n.originalTarget||n.target;hasClass(i,"olist_item_wrap")||(i=gpeByClass("olist_item_wrap",i));if(!i||i==bodyNode)return;if(hasClass(i,"olist_item_loading"))return cancelEvent(n);if(checkEvent(n))return!0;e.changed=!0;var r=i.id.match(/-?\d+/)[0],s=a[r],l=!1;each(t,function(){if(this[0]==r)return l=this[4],!1}),ajax.post("/al_apps.php",{act:"a_blacklist_delete",cancel:s?1:0,owner_id:r,hash:l},{onDone:function(){toggleClass(i,"olist_item_wrap_on",!s),a[r]=!s},showProgress:function(){addClass(i,"olist_item_loading")},hideProgress:function(){removeClass(i,"olist_item_loading")}}),o.scrollTop<50&&setTimeout(function(){elfocus(c),val(c).length&&c.select()},100);return cancelEvent(n)}),addEvent(i,"scroll",u),setTimeout(u,10)},initDescription:function(e){var t=geByClass1("apps_i_description_content");val(t,e);var n=parseInt(getStyle(t,"line-height"));Math.ceil(getSize(t)[1]/n)>7&&(setStyle(t,"height",5*n),val(t,e),removeClass(geByClass1("apps_i_description_show_more"),this.optionHiddenClass))},showFullDescription:function(){addClass(geByClass1("apps_i_description_show_more"),this.optionHiddenClass),setStyle(geByClass1("apps_i_description_content"),"height","")},appSsSliderNext:function(e){e?cur.appSsSlider&&cur.appSsSlider.next():cur.wkviewAppsSlider&&cur.wkviewAppsSlider.next()},initAppSsSlider:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t=t||"";var i=ge("apps_i_slider_next"+t),o=ge("apps_i_slider_prev"+t),r=ge("apps_i_slider_outer"+t),a=ge("apps_i_slider_thumbs"+t),s=a?domPN(a):null,c=a?a.children:[],l=null,u=null,d=void 0;function p(){if(a){var e=s.offsetWidth,t=a.scrollWidth;if(t<=e||!t||!e)return;null===l&&(l=0);var n=c[l],i=n.offsetLeft,o=(e-n.offsetWidth)/2-i;o=Math.max(-t+e,Math.min(0,o)),u&&u.stop(),u=animate(a,{left:o},{duration:d.options.animationDuration,transition:Fx.Transitions.easeOutCubic})}}function h(e){if(Array.from(c).forEach(function(e){removeClass(e,"in-view")}),0===e)for(var t=e;t<=2;t++)addClass(c[t],"in-view");else if(function(e){return e>=d.slides.length-2}(e))for(var n=d.slides.length-4,i=d.slides.length-1;i>n;)addClass(c[i],"in-view"),i--;else for(var o=e-1;o<=e+1;o++)addClass(c[o],"in-view")}function f(){var t;t=null!==d.required?d.required:d.current,a&&t!==l&&(null!==l&&removeClass(c[l],"selected"),l=t,e&&h(l),addClass(c[l],"selected"),p())}function g(){d.slideNext?addClass(i,"apps_i_slider_available"):removeClass(i,"apps_i_slider_available"),d.slidePrev?addClass(o,"apps_i_slider_available"):removeClass(o,"apps_i_slider_available"),hasClass(d.slideCurrent,"apps_promo_video_slide")?addClass(r,"apps_i_slider_video"):removeClass(r,"apps_i_slider_video"),d.slideNext?removeClass(r,"apps_i_slider_run"):addClass(r,"apps_i_slider_run")}if(d=new AppsSlider({inner:ge("apps_i_slider_inner"+t),outer:r,next:i,prev:o,onChange:g,onRequired:f,infinite:!1,isVkApp:e}),n?cur.appSsSlider=d:cur.wkviewAppsSlider=d,g(),f(),each(c,function(e,t){var n=new Image;n.onload=p,n.src=geByTag1("img",t).src,addEvent(t,"click",function(){d&&d.requireIndex(e)})}),cur.promoVideo){var v=ge("apps_promo_video_thumb"+t);v&&showInlineVideo(cur.promoVideo,"",{autoplay:1,module:"app_promo",addParams:{from_autoplay:1}},null,v)}},initSimilarAppsSlider:function(){var e=document.querySelector(".apps_similarApps");if(e){var t=e.querySelector(".apps_similarApps__listContent");t&&stManager.add(["ui_common.js"],function(){var e=function(e){window.tooltips&&tooltips.hideAll();var n=Math.abs(e.deltaX||e.wheelDeltaX||0);Math.abs(e.deltaY||e.wheelDeltaY||0)>n&&(cancelEvent(e),t.scrollLeft+=uiScroll.scrollEventDelta(e))};addEvent(t,browserFeatures.wheelEvent,e),cur.destroy.push(function(){removeEvent(t,browserFeatures.wheelEvent,e)})})}},showWinInstructions:function(e,t,n){setTimeout(function(){new MessageBox({width:800,title:cur.winInstrTitle,hideButtons:!0,containerClass:"apps_win_instr_wrap"}).content(rs(trim(cur.winInstrTpl),{download_link:t,help_link:n})).show()},500)},sendInstallRequest:function(e,t,n,i,o,r,a){var s=!!geByClass1("apps_install_header");if(e&&!isButtonLocked(e)&&!hasClass(e,"button_disabled")){lockButton(e);var c=getSize(e),l=window.isAppLanding?"apps":this.address;t?ajax.post(l,{act:"send_install_request",aid:n,ref:i,cid:o,hash:r},{onDone:function(){window.isAppLanding&&(ge("apps-landing-modal-trigger").checked=!0,addClass(e,"button__disabled"))},onFail:function(){window.isAppLanding&&(ge("apps-landing-modal-trigger-fail").checked=!0)},hideProgress:function(){var t=getLang("apps_install_push_sent_msg");unlockButton(e),addClass(e,"button_disabled"),a||setStyle(e,"width",c[0]),!window.isAppLanding&&val(e,t);var n=ge("apps_i_run_box");addClass(n,"sent"),val(n,t)}}):(cur.ref=i,ajax.post(this.address,{act:"send_install_request_box",aid:n},{onDone:function(t,o,r){if(unlockButton(e),o){cur.lang||(cur.lang={}),extend(cur.lang,t);var a=new MessageBox({title:getLang("apps_get_push_w_install_link")});a.removeButtons(),a.content(o),a.addButton(getLang("apps_install_sms_send"),function(t){if(e=ge("apps_i_request_btn")||e,t&&e&&!isButtonLocked(t)){var o=getSize(e);lockButton(t),ajax.post(this.address,{act:"send_install_request",ref:i,aid:n,cid:-3,hash:r},{onFail:function(e){if(e){var n=ge("app_sms_tt_error");val(n,e),show(n),unlockButton(t)}},onDone:function(){this.ttDestroyAll(),a.hide();var n=getLang("apps_install_push_sent_msg");unlockButton(t),addClass(e,"button_disabled"),s||setStyle(e,"width",o[0]),val(e,n);var i=ge("apps_i_run_box");addClass(i,"sent"),val(i,n)}.bind(this)})}}.bind(this),"yes"),a.addButton(getLang("global_cancel"),a.hide,"no"),a.show()}else showBox("activation.php",{act:"change_phone_box",hash:r})}.bind(this)}))}},deletingApp:!1,showInviteBox:function(e,t){e||(e=cur.app.options.aid,t=cur.app.options.hash),showTabbedBox("al_friends.php",{act:"select_friends_box",checked:"",invite:1,aid:e,from:"apps"},{stat:["privacy.js","ui_controls.js","ui_controls.css"],cache:1,params:{dark:1}}),cur.onFlistSave=function(n,i){ajax.post("apps",{act:"invite_friends",aid:e,friends:n.join(","),hash:t},{onDone:function(e,t){setTimeout(showFastBox({title:e},t).hide,2e3)},onFail:function(e){return setTimeout(showFastBox({title:getLang("global_error")},e).hide,2e3),!0}})}},showAppFriends:function(e,t,n){var i=showBox(this.address,{act:"show_app_friends_box",aid:e},{cache:1,dark:1,params:{width:"400px",bodyStyle:"padding: 0px"},onDone:function(){new uiScroll("apps_friendslist")}},t);return i.setControlsText('<a href="" onclick="Apps.showInviteBox('+e+", '"+n+"'); return false;\">"+getLang("apps_invite_friends")+"</a>"),i},recountAddVotes:function(e){var t=e.value.replace(/[^0-9]/g,"");val("add_votes",getLang("votes_flex",t)),t>0&&ge("app_pay_withdraw")&&(ge("app_pay_withdraw").value=0,this.recountWithdrawVotes(ge("app_pay_withdraw")))},recountWithdrawVotes:function(e){var t=e.value.replace(/[^0-9]/g,"");val("withdraw_votes",getLang("votes_flex",t)),t>0&&(ge("app_pay_add").value=0,this.recountAddVotes(ge("app_pay_add")))},initAppView:function(e,t){t.layer||cur.nav.push(function(e,n,i,o){if(void 0===e[0]&&!e.join&&!o.pass){if(e["#"])return cur.app.onLocChanged(e["#"]),o.back?3!=vk.al&&nav.setLoc(i):nav.setLoc(i),!1;if(!t.not_block_nav)return nav.setLoc(i),!1}});var n=void 0,i=void 0;cur.app.params.is_vkpay_service&&(n=function(){t.layer||cur.app.runCallback("onWindowBlur")},i=function(){var e=window.innerWidth||document.documentElement.clientWidth||bodyNode.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||bodyNode.clientHeight;cur.app.runCallback("onTopWindowResized",e,t)});var o=function(e){cur.app._lastFocusState!==e.type&&("block"==e.type?cur.app.runCallback("onWindowBlur"):cur.app.runCallback("onWindowFocus")),cur.app._lastFocusState=e.type};cur.app.onReady.push(function(){cur.app&&(cur.app.onLocChanged(e.hash),addEvent(document,"block unblock",o,!0),n&&addEvent(window,"mousedown",n),i&&addEvent(window,"resize",i),cur.destroy.push(function(){removeEvent(document,"block unblock",o),n&&removeEvent(window,"mousedown",n),i&&removeEvent(window,"resize",i)}))}),t.icon&&(setFavIcon(t.icon),cur.destroy.push(function(){setFavIcon("/images/favicon"+(vk.intnat?"_vk":"new")+window._iconAdd+".ico")})),this.initSimilarAppsSlider()},loadSettings:function(e){ajax.post(this.address,{act:"show_settings",aid:cur.aid},extend({cache:1},e))},showSettings:function(){this.ttHideAll(),cur.settShown?(scrollToTop(200),cur.settShown=!1,delete ajaxCache["/apps#act=show_settings&aid="+cur.aid]):showBox(this.address,{act:"show_settings",aid:cur.aid},{params:{dark:1}})},saveSettings:function(e,t,n,i){var o=this;if(!cur.savingSettings){n||(i&&i.btn&&lockButton(i.btn),show("apps_settings_progress"));var r=curBox(),a=ge("app_pay_add"),s=ge("app_pay_withdraw"),c={act:"save_settings",aid:e,hash:t,from:"appview",app_settings_1:isChecked("app_settings_1"),app_settings_256:isChecked("app_settings_256"),add:a?a.value:0,withdraw:s?s.value:0,only_checkboxes:n?1:0,cur_aid:cur.aid};isVisible("app_settings_2097152")&&(c.app_settings_2097152=isChecked("app_settings_2097152")),ajax.post("apps",c,extend({onDone:function(e){i&&i.btn&&unlockButton(i.btn),e.left_nav&&o.updateLeftNav(e.left_nav),!n&&cur.app&&cur.app.runCallback("onSettingsChanged",e.settings),cur.settingsOnLoad=!1,void 0!==e.coins&&cur.app&&cur.app.balanceUpdated(e.coins),void 0!==e.balance&&updateMoney(e.balance),r&&!n&&r.hide(),o.addToMenuErrorResolve(e,function(e){n&&checkbox("app_settings_256",256&e.settings)}),o.updateAddToMenuAction()},onFail:function(e){e&&val("apps_settings_error",e),show("apps_settings_error"),hide("apps_settings_progress"),scrollToTop(200)},showProgress:function(){cur.savingSettings=!0,r&&r.showProgress()},hideProgress:function(){cur.savingSettings=!1,r&&r.hideProgress()}},i||{}))}},updateAddToMenuAction:function(){var e=ge("app_add_to_menu_action");if(e&&cur.aid&&cur.app&&cur.app.options){var t=ge("l_app"+cur.aid),n={add:cur.app.options.vkApp?getLang("apps_vk_app_add_to_favourite"):getLang("apps_add_to_left_menu"),remove:cur.app.options.vkApp?getLang("apps_vk_app_remove_from_favourite"):getLang("apps_remove_from_left_menu")};actionsMenuItemLocked(e)&&unlockActionsMenuItem(e),e.setAttribute("onclick","return Apps.addToMenu("+cur.aid+", '"+cur.app.options.hash+"', "+intval(!t)+", this);"),val(e,t?n.remove:n.add)}},addToMenu:function(e,t,n,i){var o=this;actionsMenuItemLocked(i)||ajax.post("al_apps.php",{act:"a_left_menu",aid:e,hash:t,show:n},{onDone:function(e){o.updateLeftNav(e.left_nav),o.updateAddToMenuAction(),o.addToMenuErrorResolve(e)},showProgress:lockActionsMenuItem.pbind(i),hideProgress:unlockActionsMenuItem.pbind(i)})},vkAppNotifications:function(e,t,n,i){var o=this;actionsMenuItemLocked(i)||ajax.post("al_apps.php",{act:"vk_app_notifications",aid:e,hash:t,allow:n},{onDone:function(e){o.updateNotificationsAction(e)},showProgress:lockActionsMenuItem.pbind(i),hideProgress:unlockActionsMenuItem.pbind(i)})},updateNotificationsAction:function(e){var t=ge("app_notifications_action");if(t&&cur.aid&&cur.app&&cur.app.options){var n=e,i={add:getLang("apps_vk_app_notifications_action_enable"),remove:getLang("apps_vk_app_notifications_action_disable")};actionsMenuItemLocked(t)&&unlockActionsMenuItem(t),t.setAttribute("onclick","return Apps.vkAppNotifications("+cur.aid+", '"+cur.app.options.hash+"', "+intval(!n)+", this);"),val(t,n?i.remove:i.add)}},addToMenuErrorResolve:function(e,t){e.left_nav_error?window.menuSettings&&cur.app?(cur.settingsBoxSetLeftMenuAppCallback=function(n){delete cur.settingsBoxSetLeftMenuAppCallback,!n||256&e.settings||(e.settings+=256),isFunction(t)&&t(e)},showTabbedBox("al_settings.php",{act:"menu_box",type:2,aid:cur.aid})):(showFastBox({title:getLang("global_error")},e.left_nav_error),isFunction(t)&&t(e)):isFunction(t)&&t(e)},showAppSettings:function(e,t){this.ttHideAll(),t?showBox(this.address,{act:"settings_box_info",aid:e},{params:{dark:1}}):showBox(this.address,{act:"settings_box",aid:e,mask:0,main:1},{params:{dark:1}})},updateOnline:function(){ajax.post(this.address,{act:"update_online",aid:cur.aid,hash:cur.app.options.hash},{ads:1})},updateOffline:function(e){ajax.post(this.address,{act:"update_offline",aid:(e||cur).aid,hash:(e||cur).app.options.hash})},deleteApp:function(e,t,n,i){if(!this.deletingApp){this.deletingApp=!0;cur.app&&cur.app.options&&cur.app.options.vkApp&&this.deleteVkApp();var o=function(n,i,o,r){ajax.post(this.address,{act:"quit",id:e,hash:t||cur.app.options.hash,from:"app"},{onDone:this.withFastBackCheck(function(e){this.deletingApp=!1,window.appsListChanged=!0,this.notificationsSetCounters(e.count_all),e.left_nav&&this.updateLeftNav(e.left_nav),cur._back=!1,n.apply(null,[].slice.call(arguments))}.bind(this)),onFail:this.withFastBackCheck(function(){this.deletingApp=!1,i.apply(null,[].slice.call(arguments))}.bind(this)),showProgress:o,hideProgress:r})}.bind(this);switch(i){case"appactions":o(function(){nav.go("/apps?act=popular",!1)},function(e){e&&showFastBox({title:getLang("global_error")},e),unlockActionsMenuItem(n)},lockActionsMenuItem.pbind(n));break;default:var r=curBox();o(function(){nav.go("/apps?act=popular",!1)},function(e){if(e){var t=ge("apps_settings_error");val(t,e),show(t),scrollToTop()}r&&r.hideProgress()},function(){r&&r.showProgress()})}}},reportApp:function(e,t){showBox("al_reports.php",{act:"report_app_box",app_id:e,place_id:t},{params:{dark:1},stat:["ui_controls.js","ui_controls.css"]})},cancelInstall:function(){nav.go("/apps",!1)},deleteVkApp:function(){var e=cur.app.options.aid,t=cur.app.options.layer&&ge("app_"+e+"_container_layer")?"app_"+e+"_container_layer":"app_"+e+"_container";cur.vkAppQueue[t]&&cur.vkAppQueue[t].destroyView(),delete cur.vkAppQueue[t]},approveInstall:function(e,t,n){n&&actionsMenuItemLocked(n)||(n&&lockActionsMenuItem(n),window.appsListChanged=1,cur.app.options.vkApp&&this.deleteVkApp(),nav.go(extend(nav.objLoc,{join:1,hash:e,sett:t,notify:isChecked("apps_notifications_checkbox")&&isVisible("apps_notifications_checkbox")?1:void 0}),!1,{pass:!0}))},installApp:function(e,t,n){var i=this;ajax.post(this.address,{act:"do_install",aid:e,hash:t},{onDone:function(e){e==cur&&(i.onAppAdded(),n&&n())}})},onAppAdded:function(){window.appsListChanged=!0,cur.preload&&delete cur.preload.before,cur.app&&(cur.app.runCallback("onApplicationAdded"),cur.appUser=!0,hide("apps_install_btn"),show("apps_show_settings"))},rateOver:function(e){var t=!!geByClass1("apps_install_header");cur.rated||hasClass(e,"not_installed")||addClass(e,"over");var n="",i=[],o=0,r=[cur.installPage?-70:-66,0,-36],a="left",s=15,c=0,l=cur.appUser?cur.userRate?getLang("apps_you_voted"):getLang("apps_you_not_voted"):getLang("apps_rating_title"),u=rs(cur.rateStatsLabelTpl,{label:l});for(var d in cur.rateStats=cur.rateStats||{},cur.rateStats)cur.rateStats.hasOwnProperty(d)&&(o+=intval(cur.rateStats[d]));val("app_rate_label",l);for(var p=1;p<=5;p++){n+='<span class="app_rate stats fl_r"></span>';var h=intval(cur.rateStats[p]),f=o?intval(100*h/o):0,g=langNumeric(h,"%s",!0),v=cur.userRate!=10*p&&cur.userRate?"":"my";i.push(rs(cur.rateStatsRowTpl,{id:"apps_rate_row"+p,stars:n,count:g,percent:f,classname:v}));var w=ge("apps_rate_row"+p);w&&(setStyle(geByClass1("app_rate_bg",w),{width:f+"%"}),val(geByClass1("app_rate_percent",w),f+"%"),val(geByClass1("app_rate_cnt",w),g),geByClass1("app_rate_stars",w).className="app_rate_stars fl_l "+v)}u+=i.reverse().join(""),t&&(a="top",r=[210,0,10],s=0,c=15),showTooltip(e,{text:u,slideX:s,slide:c,className:"app_rate_tt",shift:r,forcetodown:!0,dir:a,hasover:1})},rateOut:function(e){this.showRate(),removeClass(e,"over")},rateApp:function(e){var t=this;if(cur.rated)return!1;var n=ge("apps_ratings");cur.appRate=cur.userRate=e,this.rateOut(n),cur.rated=!0,ajax.post("/al_apps.php",{act:"rate_app",aid:cur.aid,rate:e,hash:cur.rate_hash},{onDone:function(e){cur.rateStats=e,t.rateOver(n)}})},showRate:function(e){if(cur.rated)return!1;var t=intval(cur.appRate||0),n=geByClass("app_rate",ge("apps_ratings")),i=Math.floor((t+2)/10),o=Math.floor((t+2)/5)-i;for(var r in n)if(n.hasOwnProperty(r)){var a="app_rate fl_l "+(r<i?"full":r<o?"half":"empty");n[r].className=a}if(e){var s=Math.floor(e/10);for(var c in n){if(c>=s)break;n[c].className+=" over"}}},recentTabsUpdate:function recentTabsUpdate(needApps,needNotifications){if(cur.rAppsWrap&&cur.rNotWrap){if(needApps=window.appsListChanged||needApps,needNotifications=window.notificationsListChanged||needNotifications,delete window.appsListChanged,delete window.notificationsListChanged,!needApps&&!needNotifications)return;ajax.post(this.address,{act:"update_recent",notifications:needNotifications,apps:needApps,hash:cur.recentUpdateHash},{onDone:this.withFastBackCheck(function(apps,notifications){if(apps&&(each(geByClass("apps_recent_row",cur.rAppsWrap),function(e,t){re(t)}),apps[0]?(show(cur.rAppsShowMoreButton),hide(cur.rAppsNoContent),domInsertBefore(cf(apps[0]),cur.rAppsShowMoreButton)):(hide(cur.rAppsShowMoreButton),show(cur.rAppsNoContent)),cur.recentOffset=apps[1],apps[2]))for(var i in apps[2]=eval("("+apps[2]+")"),apps[2])apps[2].hasOwnProperty(i)&&(cur.apps[apps[2][i][0]]=apps[2][i]);if(notifications){each(geByClass("apps_notification_row",cur.rNotWrap),function(e,t){re(t)});var tab=ge("apps-recent-notifications-tab");notifications[0]?((notifications[2]?hide:show)(cur.rNotShowMoreButton),show(tab),hide(cur.rNotNoContent),domInsertBefore(cf(notifications[0]),cur.rNotShowMoreButton)):(hide(cur.rNotShowMoreButton),show(cur.rNotNoContent),"notifications"!=nav.objLoc.tab&&hide(tab)),cur.notificationsOffset=notifications[1],cur.notificationsNewest=notifications[4],this.notificationsSetCounters(notifications[3]),this.notificationsInit()}this.ttDestroyAll()}.bind(this)),showProgress:function(){needApps&&addClass(cur.rAppsWrap,this.optionLoadingClass),needNotifications&&addClass(domPN(cur.rNotWrap),this.optionLoadingClass)},hideProgress:this.withFastBackCheck(function(){needApps&&removeClass(cur.rAppsWrap,this.optionLoadingClass),needNotifications&&removeClass(domPN(cur.rNotWrap),this.optionLoadingClass)}.bind(this))})}},optionNotificationsReadTimeout:1e3,notificationsReadTimeout:null,notificationsRemovedCount:0,notificationTabSelect:function(){nav.objLoc.tab="notifications",nav.setLoc(nav.objLoc),removeClass(cur.rNotBlackList,this.optionHiddenClass),cur.rNotScrollbar&&cur.rNotScrollbar.update(),this.notificationsReadContent()},notificationsInit:function(){cur.rNotWrap&&cur.notificationsOffset&&!cur.rNotScrollbar?(this.notificationsRemovedCount=0,cur.rNotScrollbar=new uiScroll(cur.rNotWrap,{autoresize:!1,global:!0,onmore:this.notificationsLoadContent.bind(this),onscroll:this.notificationsReadContent.bind(this)}),this.notificationsReadContent()):cur.rNotWrap&&cur.rNotScrollbar&&(cur.rNotScrollbar.update(),this.notificationsReadContent())},notificationsMarkReaded:function(e){e.removeAttribute("data-read"),removeClass(e,"apps_notification_row_new")},notificationsReadContent:function(){"notifications"===nav.objLoc.tab&&(this.notificationsReadTimeout&&clearTimeout(this.notificationsReadTimeout),this.notificationsReadTimeout=setTimeout(function(){var e=[],t=[];each(cur.rNotWrap.querySelectorAll('div[data-read="1"]'),function(n,i){i.offsetTop+i.offsetHeight/2<=cur.rNotScrollbar.data.scrollTop+cur.rNotScrollbar.data.viewportHeight&&(e.push(i.getAttribute("data-id")),t.push(i))}),e.length&&ajax.post(this.address,{act:"a_mark",newest:cur.notificationsNewest,notif_ids:e.join(","),hash:cur.notificationsHash},{onDone:this.withFastBackCheck(function(e){this.notificationsSetCounters(e),each(t,function(e,t){this.notificationsMarkReaded(t)}.bind(this))}.bind(this))})}.bind(this),this.optionNotificationsReadTimeout))},notificationsLoadContent:function(){isVisible(cur.rNotShowMoreButton)&&!isButtonLocked(cur.rNotShowMoreButton)&&(lockButton(cur.rNotShowMoreButton),ajax.post(this.address,{act:"more_notifications",offset:cur.notificationsOffset,hash:cur.notificationsHash},{onDone:this.withFastBackCheck(function(e,t,n){unlockButton(cur.rNotShowMoreButton),cur.notificationsOffset=t,e&&cur.rNotShowMoreButton&&cur.rNotShowMoreButton.parentNode.insertBefore(cf(e),cur.rNotShowMoreButton),n&&hide(cur.rNotShowMoreButton),cur.rNotScrollbar.update()}),onFail:this.withFastBackCheck(function(){hide(cur.rNotShowMoreButton)})}))},notificationsRemoveAll:function(e,t,n,i,o){if(!linkLocked(e)&&!checkEvent(o)){var r=showFastBox({title:t},n,getLang("global_delete"),function(t){ajax.post(this.address,{act:"remove_all_notifications_and_requests",newest:cur.notificationsNewest,hash:i},{onDone:this.withFastBackCheck(function(){each(geByClass("apps_notification_row",cur.rNotWrap),function(e,t){re(t)}),hide(cur.rNotShowMoreButton),show(cur.rNotNoContent),this.notificationsSetCounters(0),cur.rNotScrollbar&&cur.rNotScrollbar.update()}.bind(this)),showProgress:function(){lockButton(t),lockLink(e)},hideProgress:this.withFastBackCheck(function(){unlockButton(t),unlockLink(e),r.hide()})})}.bind(this),getLang("global_cancel"));return!1}},notificationsSetCounters:function(e){if(void 0!==e&&(cur.notificationsNew=e,this.handlePageCount(e),cur.rNotCounter)){var t=e<1e3?e+"":".."+(e+"").substr(-3);e&&removeClass(cur.rNotCounter,this.optionHiddenClass),e?removeClass(cur.rNotCounter,"ui_tab_count_hidden"):addClass(cur.rNotCounter,"ui_tab_count_hidden"),animateCount(cur.rNotCounter,t,{str:t,onDone:e?void 0:addClass.pbind(cur.rNotCounter,this.optionHiddenClass)})}},rejectRequest:function(e,t,n,i){if(!buttonLocked(e)){var o=ge("apps_notification_"+t);this.notificationsMarkReaded(o),data(o,"html",o.innerHTML),setStyle(o,{minHeight:getSize(o)[1]}),ajax.post(this.address,{act:"reject_"+i,newest:cur.notificationsNewest,rid:t,hash:n},{onDone:this.withFastBackCheck(function(e,t,n){t=cf(trim(t)),this.notificationsRemovedCount++>1&&domFC(t).appendChild(cf(cur.notificationsRemoveAllTpl||"")),val(e,""),e.appendChild(t),addClass(e,"apps_notification_service"),this.notificationsSetCounters(n),cur.rNotScrollbar.update()}.bind(this,o)),showProgress:lockButton.pbind(e),hideProgress:this.withFastBackCheck(unlockButton.pbind(e))}),cur.rNotScrollbar.update(),cur.preload&&delete cur.preload.before}},requestsRestore:function(e,t,n){if(!linkLocked(e)){var i=ge("apps_notification_"+t);ajax.post(this.address,{act:"request_restore",newest:cur.notificationsNewest,rid:t,hash:n},{onDone:this.withFastBackCheck(function(e,t){this.notificationsRemovedCount--,val(e,data(e,"html")),removeClass(e,"apps_notification_service"),setStyle(e,{minHeight:""}),this.notificationsSetCounters(t),cur.rNotScrollbar.update()}.bind(this,i)),showProgress:lockLink.pbind(e),hideProgress:this.withFastBackCheck(unlockLink.pbind(e))}),cur.rNotScrollbar.update(),cur.preload&&delete cur.preload.before}},deleteNotification:function(e,t,n,i){if(!buttonLocked(e)){var o=ge("apps_notification_"+t);setStyle(o,{minHeight:getSize(o)[1]}),ajax.post(this.address,{act:"delete_notification",newest:cur.notificationsNewest,nid:t,aid:n,hash:i},{onDone:this.withFastBackCheck(function(e,t,n){t=cf(trim(t)),this.notificationsRemovedCount++>1&&domFC(t).appendChild(cf(cur.notificationsRemoveAllTpl||"")),val(e,""),e.appendChild(t),addClass(e,"apps_notification_service"),this.notificationsSetCounters(n)}.bind(this,o)),showProgress:lockButton.pbind(e),hideProgress:this.withFastBackCheck(unlockButton.pbind(e))})}},denyNotifications:function(e,t,n,i){if(!linkLocked(e)){var o=ge("apps_notification_"+t);setStyle(o,{minHeight:getSize(o)[1]}),ajax.post(this.address,{act:"deny_notifications",aid:n,hash:i},{onDone:this.withFastBackCheck(function(e,t){addClass(e,"apps_notification_service"),t&&val(e,t)}.pbind(o)),showProgress:lockLink.pbind(e),hideProgress:this.withFastBackCheck(unlockLink.pbind(e))})}},requestsBanUser:function(e,t,n,i){if(!linkLocked(e)){var o=ge("apps_notification_"+t);setStyle(o,{minHeight:getSize(o)[1]}),ajax.post(this.address,{act:"request_ban_user",mid:n,hash:i},{onDone:this.withFastBackCheck(function(e,t){addClass(e,"apps_notification_service"),t&&val(e,t)}.pbind(o)),showProgress:lockLink.pbind(e),hideProgress:this.withFastBackCheck(unlockLink.pbind(e))})}},removingApp:!1,restoringApp:!1,appsTabSelect:function(e){delete nav.objLoc.tab,nav.setLoc(nav.objLoc),addClass(cur.rNotBlackList,this.optionHiddenClass)},updateLeftNav:function(e){e&&val(geByTag1("ol",ge("side_bar")),e)},restoreApp:function(e,t,n){if(this.restoringApp)return!1;var i=ge("app"+e);return cur.deletedApps[e]&&"al_apps"==cur.deletedApps[e].from&&val(geByClass1("app_deleted_layer",i,"div"),cur.progressTpl),ajax.post(this.address,{act:"join",gid:cur.gid,gidhash:n,id:e,hash:t,restore:1,from:"al_apps",section:cur.section},{onDone:this.withFastBackCheck(function(t){cur.deletedApps[e]&&(val(i,cur.deletedApps[e].html),t.left_nav&&this.updateLeftNav(t.left_nav),delete cur.deletedApps[e]),cur.apps[e]&&(delete cur.apps[e].deleted,cur.appsIndex&&cur.appsIndex.add(cur.apps[e])),removeClass(i,"deleted")}.bind(this)),showProgress:function(){this.restoringApp=!0,addClass(i,this.optionLoadingClass)}.bind(this),hideProgress:this.withFastBackCheck(function(){this.restoringApp=!1,removeClass(i,this.optionLoadingClass)}.bind(this))}),!1},removeApp:function(e,t,n,i,o){if(i&&cancelEvent(i),this.removingApp)return!1;if(this.isDelayedOnSilentLoad("removeApp"+e,this.removeApp.bind(this,e,t,n)))return!1;this.ttDestroyAll();var r=n?ge("recent"+e):ge("app"+e),a=r&&cur.lContent&&cur.lContent.contains(r)&&this.isSection("settings")?"settings":n?"recent":"al_apps",s=function(){var n=void 0,i=void 0;"al_apps"==a?(n=r&&geByClass1("app_deleted_layer",r,"div"),val(n,cur.progressTpl)):"recent"==a&&(i=cur.rAppsWrap&&geByClass1("apps_recent_row_hidden",cur.rAppsWrap)),ajax.post(this.address,{act:"quit",gid:cur.gid,id:e,hash:t,offset:cur.recentOffset,from:a},{onDone:this.withFastBackCheck(function(t){"apps"==cur.module&&(delete cur.preload,"notifications"!=nav.objLoc.tab&&cur.rNotWrap&&this.isSection("catalog","list")?this.recentTabsUpdate(!1,!0):(window.notificationsListChanged=!0,t.count_all&&this.notificationsSetCounters(t.count_all)),window.appsListChanged=!0,cur.apps[e]&&(cur.appsIndex&&cur.appsIndex.remove(cur.apps[e]),cur.apps[e].deleted=!0),t.left_nav&&this.updateLeftNav(t.left_nav),"settings"==a?(cur.deletedApps[e]={from:a,html:r.innerHTML},r&&r.appendChild(cf(t.html))):"recent"==a?(i&&removeClass(i,"apps_recent_row_hidden"),hide(r),t.html&&domInsertBefore(cf(t.html),cur.rAppsShowMoreButton),geByClass1("apps_recent_row",cur.rAppsWrap)?cur.recentOffset+=t.offset:(hide(cur.rAppsShowMoreButton),show(cur.rAppsNoContent),cur.recentOffset=0)):(cur.deletedApps[e]={from:a,html:r.innerHTML},t.html&&val(n,t.html)),addClass(r,"deleted"))}.bind(this)),showProgress:function(){addClass(r,this.optionLoadingClass),this.removingApp=!0}.bind(this),hideProgress:this.withFastBackCheck(function(){removeClass(r,this.optionLoadingClass),this.removingApp=!1}.bind(this))})}.bind(this);if("recent"==a)var c=showFastBox({title:getLang("apps_quit_app_box_title")},getLang(o?"apps_game_quit_confirm":"apps_quit_confirm"),getLang("apps_remove"),function(){s(),c.hide()},getLang("global_cancel"));else if(cur.adminApps&&cur.adminApps[e])var l=showFastBox({title:getLang("apps_deletingapp")},getLang("apps_admin_quit"),getLang("global_delete"),function(){s(),l.hide()},getLang("global_cancel"));else s()},initSearchTags:function(e,t,n,i){cur.searchTags={},t&&t.forEach(function(e){Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.isObject)(e)&&e.id&&(uiSearch.toggleFilter(n,e.id,e.name,!0),cur.searchTags[e.id]=!0)}),stManager.add("indexer.js",function(){e=isArray(e)?e:[],cur.searchTagsIndexer=new vkIndexer(e,function(e){return e[1]}),i.suggester&&i.suggester.instance.setOptions({onlyShowSuggestions:!0,onAcceptSuggestion:Apps.onSearchTagAccepted.bind(Apps),fetchSuggestionsFn:Apps.fetchSearchTagsSuggestions.bind(Apps),onSelectSuggestion:Apps.onSelectSearchSuggestion.bind(Apps)},!0)})},fetchSearchTagsSuggestions:function(e){return cur.searchTagsIndexer?cur.searchTagsIndexer.search(e).filter(function(e){return!cur.searchTags[positive(e[0])]}):[]},onSearchTagRemoved:function(e){var t=ge("s_search"),n=t&&t.value||"";e=positive(e),delete cur.searchTags[e],this.searchUpdate(n)},onSelectSearchSuggestion:function(e){e=positive(e);var t=Object.keys(cur.searchTags);t.push(e),cur.previewTagsStr=t.join(","),cur.searchStr="",this.searchUpdate(""),cur.previewTagsStr=""},onSearchTagAccepted:function(e,t){var n=ge("s_search");e=positive(e),cur.searchTags[e]=!0,uiSearch.toggleFilter(n,e,t,!0),val(n,""),this.searchUpdate("")},runApp:function(e,t,n,i,o,r,a,s){if(!vk.id)return showDoneBox(cur.pleaseSignInLang),!1;lockButton(e);var c=clone(nav.objLoc);delete c.w,nav.setLoc(c),window.appsListChanged=1;var l="/"+t+"?join=1&hash="+n+"&sett="+i;if(a&&(l="/"+t+"?act=embed&join=1&join_hash="+n+"&sett="+i+"&hash="+s),cur.fromInstallBox&&(l+="&from_install="+(1==cur.fromInstallBox?1:2)),o)if(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_0__.isObject)(o))for(var u in o)"w"!=u&&(l+="&"+u+"="+o[u]);else""!=o&&(l+="&ref="+o);r&&(l+="&mid="+r),nav.objLoc["#"]&&(l+="#"+nav.objLoc["#"]),a&&(location.href=l),nav.go(l)},updatesInterval:null,stopUpdates:function(){this.updatesInterval&&clearInterval(this.updatesInterval)},initUpdates:function(e){e&&e.key&&(cur.updatesKey=e.key);var t=function(){window.Notifier&&cur.updatesKey&&Notifier.addKey(cur.updatesKey,function(e,t){if(cur.updatesKey){if(t.events)for(var n in t.events)t.events.hasOwnProperty(n)&&this.parseEvent(t.events[n]);t.ts&&(cur.updatesKey.ts=t.ts)}}.bind(this))}.bind(this);t(),this.updatesInterval=setInterval(t,1e4),cur.destroy.push(this.stopUpdates.bind(this))},parseEvent:function(e){var t=(e=e.split("<!>"))[0];if(cur.updatesVersion&&t==cur.updatesVersion){var n=browser.opera&&intval(browser.version)<=12,i=e[3],o=new Date,r=o.getHours(),a=o.getMinutes();r<10&&(r="0"+r),a<10&&(a="0"+a),i=i.replace("{date}",r+":"+a);var s=domFC(cf(i));if(cur.fWrap){var c=function e(){cur.fScrollbar&&cur.fScrollbar.update(),n?s.removeEventListener("oTransitionEnd",e):removeEvent(s,"webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",e)},l=cur.fWrap.__uiScroll__?cur.fWrap.__uiScroll__.content:cur.fWrap;addClass(s,"apps_feed_row_just_added"),l.insertBefore(s,domFC(l)),n?s.addEventListener("oTransitionEnd",c):addEvent(s,"webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",c),removeClassDelayed(s,"apps_feed_row_just_added"),this.ttHideAll()}}},feedInit:function(){cur.fWrap&&cur.feedOffset&&!cur.fScrollbar&&(cur.fScrollbar=new uiScroll(cur.fWrap,{autoresize:!1,global:!0,onmore:this.feedLoadContent.bind(this)}))},feedLoadContent:function(){!isButtonLocked(cur.fShowMoreButton)&&isVisible(cur.fShowMoreButton)&&ajax.post(this.address,{act:"more_feed",offset:cur.feedOffset,hash:cur.feedHash},{onDone:this.withFastBackCheck(function(e,t,n){cur.feedOffset=t,e&&cur.fShowMoreButton&&cur.fShowMoreButton.parentNode.insertBefore(cf(e),cur.fShowMoreButton),n&&hide(cur.fShowMoreButton),cur.fScrollbar&&cur.fScrollbar.update()}),showProgress:lockButton.pbind(cur.fShowMoreButton),hideProgress:this.withFastBackCheck(unlockButton.pbind(cur.fShowMoreButton))})},myAppOver:function(e,t,n){if(hasClass(t,"deleted")||!vk.id)return!1;showTooltip(t,{url:this.address,params:{act:"show_app_friends_tt",aid:e,no_size:n?1:0},typeClass:"tt_black",slide:15,center:1,shift:[0,8,8],ajaxdt:200,showdt:300,hidedt:200,dir:"auto"})},ttScore:function(e,t,n){var i=void 0;return cur.ttScoreShown&&window.tooltips&&(tooltips.hideAll(),i=0),showTooltip(e,{center:1,black:1,shift:[0,8,8],showsp:i,text:'<div class="apps_score_tt_cont"><b>'.concat(t,"</b>",n?'<div class="apps_score_tt">'+n+"</div>":"","</div>")})},ttCommon:function(e,t,n){return 0===(n=extend({parent:void 0,center:void 0,event:0,appendEl:void 0,shift:void 0},n)).event&&(n.event=window.event),n.event&&cancelEvent(n.event),n.appendEl&&(n.appendEl=ge(n.appendEl)),n.center?showTooltip(e,{center:n.center,shift:n.shift||[0,8,8],black:1,appendEl:n.appendEl,text:t}):showTitle(e,t,n.shift,n)},ttHideAll:function(){window.tooltips&&tooltips.hideAll()},ttDestroyAll:function(){window.tooltips&&tooltips.destroyAll()},scrollToHeader:function(){var e=ge("apps_header_block"),t=scrollNode.scrollTop,n=getSize("page_header_cont")[1];if(e){var i=Math.max(0,getXY(e)[1]-parseInt(getStyle(e,"marginTop"),10));t+(vk.staticheader?Math.max(0,n-t):n)>i&&scrollToY(i,200)}},scrollToSearch:function(){var e=scrollNode.scrollTop,t=getSize("page_header_cont")[1];if(cur.aSearchWrap){var n=getXY(domPN(cur.aSearchWrap))[1];e+(vk.staticheader?Math.max(0,t-e):t)>n&&scrollToY(n,200)}},scrollCheck:function(){this.isDelayedOnSilentLoad("scrollCheck",this.scrollCheck.bind(this))||!browser.mobile&&!cur.isAppsLoading&&!cur.disableAutoMore&&isVisible(cur.lShowMoreButton)&&(window.innerHeight||document.documentElement.clientHeight||bodyNode.clientHeight)+scrollGetY()+400>=cur.lShowMoreButton.offsetTop&&this.searchLoadContent()},searchFocusedClass:"apps_search_focused",backupListContent:function(e){if(cur.backupList||e){if(cur.backupList&&!cur.backupList.contentCopied&&e){for(cur.backupList.content=document.createDocumentFragment();cur.lContent.firstChild;)cur.backupList.content.appendChild(cur.lContent.firstChild);for(cur.backupList.preload=document.createDocumentFragment();cur.lPreload.firstChild;)cur.backupList.content.appendChild(cur.lPreload.firstChild);cur.backupList.contentCopied=!0}}else cur.backupList={cur:{loadMore:cur.loadMore,shownApps:cur.shownApps,sectionCount:cur.sectionCount,searchOffset:cur.searchOffset},content:null,preload:null,contentCopied:!1}},restoreListContent:function(){return cur.backupList?(this.searchProgress(!1),val(cur.lContent,""),val(cur.lPreload,""),extend(cur,cur.backupList.cur),cur.lContent.appendChild(cur.backupList.content),cur.lPreload.appendChild(cur.backupList.preload),delete cur.backupList,!0):(delete cur.backupList,!1)},indexAll:function(e){cur.appsIndex=new vkIndexer(cur.appsList.all,function(e){try{return cur.apps[parseInt(e[0])]=e,e[3]}catch(e){return""}},e)},searchUpdate:function(e){if(!this.isDelayedOnSilentLoad("searchUpdate",this.searchUpdate.bind(this,e))){((e=e||"").length<2||cur.previewTagsStr)&&(e="");var t=cur.previewTagsStr||Object.keys(cur.searchTags||{}).join(",");if(cur.ignoreEqual||cur.searchStr!==e||t!==cur.searchTagsStr){this.isSection("list")&&e&&this.backupListContent(),cur.searchStr=e||"",cur.searchTagsStr=t;var n=this.isSection("apps","settings","manage","admin_requests","reports","ads")?"all":"search";if(e&&this.isSection("apps","settings","manage","admin_requests","reports","ads")){var i=cur.appsIndex.search(clean(e));cur.curList=n+"_search_"+e+"_"+cur.searchTagsStr,cur.appsList[cur.curList]=i,e+=" "+(parseLatin(e)||""),e=trim(escapeRE(e).split("&").join("&amp;")),cur.selection={re:new RegExp("("+e.replace(cur.appsIndex.delimiter,"|")+")","gi"),val:"<span>$1</span>"}}else cur.curList=n,cur.selection=!1;this.ttHideAll(),this.searchProgress(!0),this.scrollToSearch(),hide(cur.lShowMoreButton),this.isSection("catalog","list")&&this.searchWriteToAddressBar(),cur.loadMore=1,cur.shownApps=cur.searchOffset=0,this.showRows()}delete cur.ignoreEqual}},showRows:function(){if(!this.isDelayedOnSilentLoad("showRows",this.showRows.bind(this))){if(cur.searchStr||cur.searchTagsStr)this.isSection("list","catalog")&&this.searchLoadContent();else{if(this.isSection("list"))return this.restoreListContent()||(extend(cur,{searchOffset:0,sectionCount:0,shownApps:0,loadMore:0}),this.searchCatalog(cur.searchStr,cur.searchOffset)),window[cur.loadMore?"show":"hide"](cur.lShowMoreButton),!1;if(this.isSection("catalog"))return extend(cur,{searchOffset:0,sectionCount:0,shownApps:0,loadMore:0}),val(cur.lContent,""),val(cur.lPreload,""),this.switchLayout("catalog"),this.searchProgress(!1),this.sliderStart(),window[cur.loadMore?"show":"hide"](cur.lShowMoreButton),!1}if(this.isSection("settings","manage","admin_requests","apps","reports","ads")){if(cur.defaultCount&&cur.shownApps<cur.sectionCount){var e=clean(cur.searchStr),t=this.isSection("manage","admin_requests"),n="",i=cur.appsList[cur.curList]||[],o=i.length;if((i=this.filter(i.slice(cur.shownApps)).slice(0,cur.defaultCount)).length&&cur.appTpl){var r=[];each(i,function(e,n){n=clone(n),cur.selection&&(n[3]=n[3].replace(cur.selection.re,cur.selection.val)),r.push(cur.appTpl(n,e==i.length-1,t))}),n=r.join("")}cur.shownApps?n&&cur.lContent.appendChild(cf(n)):n?(val(cur.lContent,n),val(cur.aSummaryCounter,o)):(val(cur.lContent,cur.aSummary.innerHTML.replace("{query}","<b>"+e+"</b>")),val(cur.aSummaryCounter,"")),cur.shownApps+=cur.defaultCount,cur.shownApps>=cur.sectionCount?hide(cur.lShowMoreButton):(show(cur.lShowMoreButton),this.scrollCheck()),this.searchProgress(!1)}return!1}return!0}},searchLoadContent:function(){if(this.isSection("catalog","list")){if(cur.searchStr||(cur.searchStr=""),cur.lPreload.innerHTML){for(var e=document.createDocumentFragment();cur.lPreload.firstChild;)e.appendChild(cur.lPreload.firstChild);cur.lContent.appendChild(e)}return cur.loadMore?this.searchCatalog(cur.searchStr,cur.searchOffset):(cur.loadMore=!0,hide(cur.lShowMoreButton)),!1}return!this.isSection("apps","manage","admin_requests","settings","reports","ads")||this.showRows()},searchCatalog:function(e,t){e=e||"";var n=cur.searchTagsStr;ajax.post(this.address,{act:e||n||!this.isSection("list")?"search":cur.list,q:e,offset:t,oid:cur.oid,from:cur.section,catalog_search:1,id:cur.listId||void 0,tags:n},{cache:e||cur.searchTagsStr?0:1,onDone:this.withFastBackCheck(function(t,i,o){e==cur.searchStr&&n==cur.searchTagsStr&&(this.isSection("catalog","list")&&((cur.searchStr||n)&&this.sliderStop(),this.switchLayout(cur.searchStr||n?"list":cur.section),this.searchWriteToAddressBar()),this.backupListContent(!0),t&&val(cur.lContent,t),val(cur.lPreload,i||""),cur.loadMore=!!i,extend(cur,o),cur.loadMore&&show(cur.lShowMoreButton),this.scrollCheck())}.bind(this)),showProgress:function(){cur.isAppsLoading=!0,lockButton(cur.lShowMoreButton)},hideProgress:this.withFastBackCheck(function(){cur.isAppsLoading=!1,this.searchProgress(!1),unlockButton(cur.lShowMoreButton)}.bind(this))})},filter:function(e){for(var t=e.length,n=[],i=0;i<t;i++){var o=e[i];cur.apps&&cur.apps[o[0]]&&!cur.apps[o[0]].deleted&&n.push(o)}return n},searchLoadFromAddressBar:function(){setTimeout(function(){cur.searchStr=nav.objLoc.q||""},0)},searchWriteToAddressBar:function(e){nav.setLoc(extend(nav.objLoc,{q:cur.searchStr||null,tags:cur.searchTagsStr||null}))},searchProgress:function(e){cur.aSearch&&uiSearch[e?"showProgress":"hideProgress"](cur.aSearch)},searchFocused:function(){cur.aWrap&&addClass(cur.aWrap,this.searchFocusedClass)},searchBlured:function(){cur.aWrap&&removeClass(cur.aWrap,this.searchFocusedClass)},searchReset:function(){cur.aSearch&&uiSearch.reset(cur.aSearch),cur.searchStr=""},switchLayout:function(e){cur.aWrap&&(removeClass(cur.aWrap,"apps_catalog_layout"),removeClass(cur.aWrap,"apps_list_layout"),removeClass(cur.aWrap,"apps_manage_layout"),removeClass(cur.aWrap,"apps_admin_requests_layout"),removeClass(cur.aWrap,"apps_settings_layout"),removeClass(cur.aWrap,"apps_apps_layout"),removeClass(cur.aWrap,"apps_page_layout"),addClass(cur.aWrap,"apps_"+e+"_layout"))},geTabBySection:function(e,t){var n=ge("apps_tab_"+e+(t?"_"+t:""));return!(!n||!(n=geByTag1("a",n)))&&n},setHistoryBackRules:function(){this.isSection("manage","admin_requests")||(cur._back={show:[function(){if(cur._back.swap&&each(cur._back.swap,function(e,t){t.dummy.parentNode.replaceChild(t.content,t.dummy)}),cur.fScrollbar&&cur.fScrollbar.scrollTop(cur.fScrollbar.data.scrollTop),cur.rNotScrollbar&&cur.rNotScrollbar.scrollTop(cur.rNotScrollbar.data.scrollTop),delete cur._back.swap,setTimeout(function(){var e=nav.objLoc&&ge("notifications"==nav.objLoc.tab?"apps-recent-notifications-tab":"apps-recent-apps-tab");e&&this.switchTabPrepared(e.getElementsByTagName("a")[0]),cur.aSearch&&(uiSearch["list"===cur.section?"setFixed":"setStatic"](cur.aSearch),uiSearch.startEvents(cur.aSearch),cur.aSearch.value=cur.searchStr||"",uiSearch.scrollResize(cur.aSearch)),this.searchWriteToAddressBar(cur.searchStr)}.bind(this),0),this.ttHideAll(),this.recentTabsUpdate(),this.startEvents(),cur.aTabs){var e=this.geTabBySection(this.isSection("list")?cur.list+(cur.listId||""):cur.section);e&&uiTabs.switchTab(e),uiTabs.hideProgress(cur.aTabs)}if(cur.aSubTabs){var t=this.geTabBySection(cur.section,cur.subsection);t&&uiTabs.switchTab(t),uiTabs.hideProgress(cur.aSubTabs)}}.bind(this)],hide:[this.stopEvents.bind(this),this.ttHideAll.bind(this)],text:cur.backLang})},switchTabPrepared:function switchTabPrepared(tabAnchor,event){if(event&&checkEvent(event))return!0;var tabWrap=document.querySelectorAll('div[data-tab="'+domPN(tabAnchor).id+'"]')[0];if(!tabWrap)return!0;var tabGroup=tabWrap.getAttribute("data-tab-group"),tabCallback=tabWrap.getAttribute("data-tab-callback"),tabWraps=document.querySelectorAll('div[data-tab-group="'+tabGroup+'"]');return each(tabWraps,function(e,t){t!==tabWrap&&addClass(t,this.optionHiddenClass)}.bind(this)),uiTabs.switchTab(tabAnchor),removeClass(tabWrap,this.optionHiddenClass),tabCallback&&eval("(function(){"+tabCallback+";})()"),!1},switchTab:function switchTab(section,event,noSearchReset,target){if(event&&checkEvent(event))return!0;if((this.isSection("list")?cur.list+cur.listId:section)==cur.section)return cur.searchStr&&this.searchReset(),!1;uiSearch.removeAllFilters();var noscroll=!1,scrollToHeader=!1,scrollToTop=!1,newSection=~"/apps/catalog/settings/reports/manage/admin_requests/".indexOf(section)?section:"list",newLayout="reports"==newSection?"apps":newSection;"catalog"==cur.section&&"list"==newSection||"list"==cur.section&&"catalog"==newSection||"list"==cur.section&&"list"==newSection?scrollToHeader=noscroll=!0:cur.section!==newSection&&(scrollToTop=noscroll=!0);var preload=cur.preload&&cur.preload[section],oldBefore="",oldHeader="";if(!cur.preventFastBack&&preload&&(null!==preload.header||cur.leavePreloadedHeader||cur.preload.header)&&(null!==preload.before||cur.leavePreloadedBefore||cur.preload.before)){this.ttDestroyAll();var oldWrapper=ge("wrap3"),title=ge("title");if(cur._back){window.revertLastInlineVideo&&revertLastInlineVideo(),each(cur._back.hide,function(e,t){t&&t()}),globalHistoryDestroy(cur._back.loc||nav.strLoc),globalHistory.length>2&&globalHistoryDestroy(globalHistory[0].loc),oldBefore=ge("apps_before"),oldHeader=ge("apps_header"),oldWrapper.parentNode.replaceChild(oldWrapper.cloneNode(!0),oldWrapper);var hist={content:oldWrapper,title:title.innerHTML,loc:cur._back.loc||nav.strLoc,cur:cur,radioBtns:radioBtns,ajaxCache:ajaxCache,pid:PageID,scrollTop:scrollGetY(),htitle:document.title.toString(),width:vk.width,width_dec:vk.width_dec,width_dec_footer:vk.width_dec_footer,noleftmenu:vk.noleftmenu,notopmenu:vk.notopmenu,nobottommenu:vk.nobottommenu,hideHeader:!(!title.parentNode||isVisible(title.parentNode))||void 0};hist.back=!(!_tbLink||!_tbLink.loc)&&[_tbLink.loc,val(_tbLink),_tbLink.fast],showBackLink(hist.loc,cur._back.text,1),globalHistory.push(hist)}else _tbLink&&(_tbLink.fast=0),processDestroy(cur);PageID=NextPageID,radioBtns={},ajaxCache={},boxQueue.hideAll(),layerQueue.clear(),layers.fullhide&&layers.fullhide(!0);var oldCur=cur;cur={aWrap:ge("apps_wrap"),scrollToHeader:scrollToHeader,scrollToTop:scrollToTop,destroy:[],nav:[],preload:oldCur.preload,_back:oldCur._back};var newJs=[],tmp=null;null!==preload.before?val("apps_before",preload.before):oldCur.leavePreloadedBefore?(oldCur._back&&(tmp={dummy:ce("div"),content:oldBefore},oldCur._back.swap||(oldCur._back.swap=[]),oldCur._back.swap.push(tmp),oldBefore.parentNode.replaceChild(tmp.dummy,oldBefore),tmp=ge("apps_before"),tmp.parentNode.replaceChild(oldBefore,tmp),oldCur.fScrollbar&&oldCur.fScrollbar.scrollTop(oldCur.fScrollbar.data.scrollTop),oldCur.rNotScrollbar&&oldCur.rNotScrollbar.scrollTop(oldCur.rNotScrollbar.data.scrollTop)),extend(cur,{updatesKey:oldCur.updatesKey,updatesVersion:oldCur.updatesVersion,fScrollbar:oldCur.fScrollbar,feedOffset:oldCur.feedOffset,feedHash:oldCur.feedHash,rNotScrollbar:oldCur.rNotScrollbar,notificationsOffset:oldCur.notificationsOffset,notificationsNewest:oldCur.notificationsNewest,notificationsHash:oldCur.notificationsHash,recentOffset:oldCur.recentOffset,recentUpdateHash:oldCur.recentUpdateHash,searchTagsIndexer:oldCur.searchTagsIndexer,searchTags:oldCur.searchTags})):(val("apps_before",oldCur.preload.before[0]),newJs.push(oldCur.preload.before[1])),null!==preload.header?val("apps_header",preload.header):oldCur.leavePreloadedHeader?oldCur._back&&(tmp={dummy:ce("div"),content:oldHeader},oldCur._back.swap||(oldCur._back.swap=[]),oldCur._back.swap.push(tmp),oldHeader.parentNode.replaceChild(tmp.dummy,oldHeader),tmp=ge("apps_header"),tmp.parentNode.replaceChild(oldHeader,tmp)):(val("apps_header",oldCur.preload.header[0]),newJs.push(oldCur.preload.header[1])),val("apps_after",preload.after||""),val("apps_content",preload.content||""),val("apps_list_content",preload.list_content||""),val("apps_list_preload",preload.list_preload||""),this.switchLayout(newLayout),each(newJs,function(i,js){js&&eval("(function(){"+js+";})()")}),preload.js&&eval("(function(){"+preload.js+";})()"),window.__adsUpdate("force"),nav.objLoc={0:this.address,act:"catalog"===section?void 0:section,tab:"catalog"===newSection||"list"===newSection?nav.objLoc.tab:void 0,mid:nav.objLoc.mid,gid:nav.objLoc.gid,add:nav.objLoc.add},nav.setLoc(nav.objLoc),this.searchReset();var tab=this.geTabBySection(section);return tab&&setTimeout(uiTabs.switchTab.pbind(tab),0),window[cur.loadMore?"show":"hide"](cur.lShowMoreButton),!1}target&&(hasClass(target,"app_cat_link")?lockLink(target):addClass(target,"apps_header_progress"));var _tab2=this.geTabBySection(section);return _tab2&&(uiTabs.switchTab(_tab2),uiTabs.showProgress(_tab2)),nav.go({0:this.address,act:"catalog"===section?void 0:section,tab:"catalog"===newSection||"list"===newSection?nav.objLoc.tab:void 0,mid:nav.objLoc.mid,gid:nav.objLoc.gid,add:nav.objLoc.add},!1,{onDone:function(e){target&&(hasClass(target,"app_cat_link")?unlockLink(target):removeClass(target,"apps_header_progress")),extend(cur,{scrollToHeader:scrollToHeader,scrollToTop:scrollToTop})}.pbind(cur),noscroll:noscroll})},sliderInit:function(){"catalog"!=cur.section||cur.featuredSlider||(cur.featuredSlider=new AppsSlider({inner:"apps_featured_slides",outer:"apps_featured_slider",next:"apps_featured_next",prev:"apps_featured_prev",onSlide:function(){window.AdsLight&&AdsLight.applyAds()}}))},sliderStart:function(){cur.featuredSlider&&(cur.featuredSlider.slideshowStart(),cur.featuredSlider.addHandler())},sliderStop:function(){cur.featuredSlider&&(cur.featuredSlider.removeHandler(),cur.featuredSlider.slideshowStop())},collectionsLoadContent:function(e){if(isVisible(e)&&!buttonLocked(e))return cur.collectionsOffset&&cur.collectionsHasMore?void ajax.post("al_apps.php",{act:"a_collections_more",offset:cur.collectionsOffset,seed:cur.collectionsSeed},{onDone:function(t,n,i){geByClass1("_apps_collections").appendChild(cf(t)),cur.collectionsHasMore=i,i||hide(e),cur.collectionsOffset=n},showProgress:lockButton.pbind(e),hideProgress:unlockButton.pbind(e)}):hide(e)},addToMineGroups:function(e,t,n,i){var o={act:"add_to_mine_group_box",aid:e,hash:t,height:lastWindowHeight,from_gid:i};n&&(o.source=n),showBox("apps",o,{params:{dark:1,width:450,bodyStyle:"padding: 22px 0 0"}})},makeAppSlider:function(e){return new AppsSlider(e)},closeExternalApp:function(){cur.app.clientRpc&&cur.app.clientRpc.callMethod("closeExternalApp")},adminRequestRow:function(e){var t="",n=_slicedToArray(e,6),i=n[0],o=n[1],r=n[2],a=n[3],s=n[4],c=n[5];if(s=intval(s),o='<img src="'+o+'"/>',r)if("away.php"==r.substr(0,8)){var l=r.replace(/&/g,"&amp;");a='<a href="'+r+'" target="_blank" onclick="return goAway(\''+l+"')\">"+a+"</a>",o='<a href="'+r+'" target="_blank" onclick="return goAway(\''+l+"')\">"+o+"</a>"}else a='<a href="'+r+'">'+a+"</a>",o='<a href="'+r+'">'+o+"</a>";return cur.adminRequest&&void 0!==cur.adminRequest[i]?null!==cur.adminRequest&&(t=cur.adminRequest[i]?getLang("apps_admin_request_accepted"):getLang("apps_admin_request_declined")):t="<a onclick='Apps.adminRequestAccept(this, "+i+', "'+c+"\")'>"+getLang("apps_admin_request_accept")+"</a> | <a onclick='Apps.adminRequestDecline(this, "+i+', "'+c+"\")'>"+getLang("apps_admin_request_decline")+"</a>",rs(cur.rowTpl,{id:i,name:a,img:o,info:'<div class="apps_settings_size">'+(s?getLang("apps_X_participants",s,!0):getLang("apps_noparticipants"))+"</div>",actions:t})},adminRequestAccept:function(e,t,n){var i=gpeByClass("_app_settings_actions",e);i&&!cur.adminRequestProcess&&(cur.adminRequestProcess=!0,ajax.post("al_apps_edit.php",{act:"a_accept_admin_request",aid:t,hash:n},{onDone:function(e,n,o){cur.adminRequest||(cur.adminRequest={}),cur.adminRequest[t]=o,val(i,e),n&&showDoneBox(n)},hideProgress:function(){cur.adminRequestProcess=!1}}))},adminRequestDecline:function(e,t,n){var i=gpeByClass("_app_settings_actions",e);i&&!cur.adminRequestProcess&&(cur.adminRequestProcess=!0,ajax.post("al_apps_edit.php",{act:"a_decline_admin_request",aid:t,hash:n},{onDone:function(e,n,o){cur.adminRequest||(cur.adminRequest={}),cur.adminRequest[t]=o,val(i,e),n&&showDoneBox(n)},hideProgress:function(){cur.adminRequestProcess=!1}}))},share:function(e,t){showBox("like.php",{act:"publish_box",object:"app"+e+"_"+t})},unverifiedGoBack:function(){return window.history.back(),!1},showUnverifiedBackBtn:function(){if(window.globalHistory&&window.globalHistory.length){var e=geByClass1("apps_unverifiedAppWarning__btn_back");e&&addClass(e,"apps_unverifiedAppWarning__btn_active")}},runUnverified:function(e,t){lockButton(e),nav.setLoc(extend(nav.objLoc,{run_hash:t})),nav.reload()}};try{stManager.done("apps.js")}catch(e){}},function(e,t,n){e.exports=n(0)},function(e,t,n){"use strict";function i(e){var t=new Date;return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function o(e){return i(new Date(e.getTime()+864e5))}function r(e){return i(new Date(e.getTime()-864e5))}function a(e,t){var n=new Date(e),i=new Date(t);return n.getFullYear()===i.getFullYear()&&n.getMonth()===i.getMonth()&&n.getDate()===i.getDate()}function s(e){return e>=10?e:"0"+e}function c(e,t){var n=void 0;e=Math.max(e,0);var i=Math.floor(e%60);n=i<10?"0"+i:i;var o=(e=Math.floor(e/60))%60;return n=o+":"+n,((e=Math.floor(e/60))>0||t)&&(o<10&&(n="0"+n),n=e+":"+n),n}n.r(t),n.d(t,"isToday",function(){return i}),n.d(t,"isYesterday",function(){return o}),n.d(t,"isTomorrow",function(){return r}),n.d(t,"isSameDate",function(){return a}),n.d(t,"leadingZero",function(){return s}),n.d(t,"formatTime",function(){return c})},function(e,t,n){"use strict";n.r(t),n.d(t,"KEY",function(){return r}),n.d(t,"addEvent",function(){return a}),n.d(t,"removeEvent",function(){return s}),n.d(t,"triggerEvent",function(){return c}),n.d(t,"cancelEvent",function(){return l}),n.d(t,"stopEvent",function(){return u}),n.d(t,"normEvent",function(){return d}),n.d(t,"checkEvent",function(){return p}),n.d(t,"checkKeyboardEvent",function(){return h}),n.d(t,"checkOver",function(){return f});var i=n(5),o=n(4),r={LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:8,TAB:9,RETURN:13,ENTER:13,ESC:27,PAGEUP:33,PAGEDOWN:34,SPACE:32,CTRL:17,ALT:18,SHIFT:16};function a(e,t,n,r,a,s){if((e=Object(i.ge)(e))&&3!=e.nodeType&&8!=e.nodeType){var c,u=a?((c=function(e){var t=e.data;e.data=a;var i=n.apply(this,[e]);return e.data=t,i}).handler=n,c):n;e.setInterval&&e!==window&&(e=window);var p=Object(i.data)(e,"events")||Object(i.data)(e,"events",{}),h=Object(i.data)(e,"handle")||Object(i.data)(e,"handle",function(e){return function(){(function(e){e=d(e);var t=Array.from(arguments);t[0]=e;var n=Object(i.data)(this,"events");if(!n||"string"!=typeof e.type||!n[e.type]||!n[e.type].length)return;var o=(n[e.type]||[]).slice();for(var r in o)if(o.hasOwnProperty(r)){if("mouseover"===e.type||"mouseout"===e.type){for(var a=e.relatedElement;a&&a!==this;)a=a.parentNode;if(a===this)continue}var s=o[r].apply(this,t);if(!1!==s&&-1!==s||l(e),-1===s)return!1}}).apply(e,arguments)}}(e));Object(o.each)(t.split(/\s+/),function(t,n){p[n]||(p[n]=[],!r&&e.addEventListener?e.addEventListener(n,h,s):!r&&e.attachEvent&&e.attachEvent("on"+n,h)),p[n].push(u)})}}function s(e,t,n,r){if(void 0===r&&(r=!1),e=Object(i.ge)(e)){var a=Object(i.data)(e,"events");if(a)if("string"==typeof t)Object(o.each)(t.split(/\s+/),function(t,s){if(Object(o.isArray)(a[s])){var c=a[s].length;if(Object(o.isFunction)(n)){for(var l=c-1;l>=0;l--)if(a[s][l]&&(a[s][l]===n||a[s][l].handler===n)){a[s].splice(l,1),c--;break}}else{for(var u=0;u<c;u++)delete a[s][u];c=0}c||(e.removeEventListener?e.removeEventListener(s,Object(i.data)(e,"handle"),r):e.detachEvent&&e.detachEvent("on"+s,Object(i.data)(e,"handle")),delete a[s])}}),Object(o.isEmpty)(a)&&(Object(i.removeData)(e,"events"),Object(i.removeData)(e,"handle"));else for(var c in a)a.hasOwnProperty(c)&&s(e,c)}}function c(e,t,n,r){e=Object(i.ge)(e);var a=Object(i.data)(e,"handle");if(a){var s=function(){return a.call(e,Object(o.extend)(n||{},{type:t,target:e}))};r?s():setTimeout(s,0)}}function l(e){if(!(e=e||window.event))return!1;for(;e.originalEvent;)e=e.originalEvent;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.cancelBubble=!0,e.returnValue=!1,!1}function u(e){if(!(e=e||window.event))return!1;for(;e.originalEvent;)e=e.originalEvent;return e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,!1}function d(e){var t=e=e||window.event;if((e=Object(o.clone)(t)).originalEvent=t,e.target||(e.target=e.srcElement||document),3==e.target.nodeType&&(e.target=e.target.parentNode),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target),null==e.pageX&&null!=e.clientX){var n=document.documentElement,i=bodyNode;e.pageX=e.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||i&&i.scrollTop||0)-(n.clientTop||0)}return!e.which&&(e.charCode||0===e.charCode?e.charCode:e.keyCode)&&(e.which=e.charCode||e.keyCode),!e.metaKey&&e.ctrlKey?e.metaKey=e.ctrlKey:!e.ctrlKey&&e.metaKey&&browser.mac&&(e.ctrlKey=e.metaKey),!e.which&&e.button&&(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0),e}function p(e){var t=e||window.event;return t&&("click"===t.type||"mousedown"===t.type||"mouseup"===t.type)&&(t.which>1||t.button>1||t.ctrlKey||t.shiftKey||browser.mac&&t.metaKey)||!1}function h(e){if(!(e=d(e))||!e.target)return!1;if(!e.screenX)return!0;var t=Object(i.getSize)(e.target),n=Object(i.getXY)(e.target),o=e.pageX-n[0],r=e.pageY-n[1];return o<-1||o>t[0]+1||r<-1||r>t[1]+1||Math.abs(e.pageX-n[0]-t[0]/2)<1&&Math.abs(e.pageY-n[1]-t[1]/2)<1}function f(e,t){if(!e)return!0;e=e.originalEvent||e,t=t||e.target;var n=e.fromElement||e.relatedTarget;if(!n||n===t||n===t.parentNode)return!0;for(;n!==t&&n.parentNode&&n.parentNode!==bodyNode;)n=n.parentNode;return n!==t}window.KEY=r,window.addEvent=a,window.removeEvent=s,window.triggerEvent=c,window.cancelEvent=l,window.stopEvent=u,window.normEvent=d,window.checkEvent=p,window.checkKeyboardEvent=h,window.checkOver=f},function(e,t,n){"use strict";n.r(t),n.d(t,"vkLocal",function(){return s}),n.d(t,"lTimeout",function(){return c}),n.d(t,"rand",function(){return l}),n.d(t,"irand",function(){return u}),n.d(t,"isUndefined",function(){return d}),n.d(t,"isFunction",function(){return p}),n.d(t,"isArray",function(){return h}),n.d(t,"isString",function(){return f}),n.d(t,"isObject",function(){return g}),n.d(t,"isEmpty",function(){return v}),n.d(t,"vkNow",function(){return w}),n.d(t,"vkImage",function(){return _}),n.d(t,"trim",function(){return m}),n.d(t,"stripHTML",function(){return b}),n.d(t,"escapeRE",function(){return y}),n.d(t,"intval",function(){return C}),n.d(t,"floatval",function(){return S}),n.d(t,"positive",function(){return k}),n.d(t,"isNumeric",function(){return x}),n.d(t,"winToUtf",function(){return A}),n.d(t,"replaceEntities",function(){return T}),n.d(t,"clean",function(){return L}),n.d(t,"unclean",function(){return B}),n.d(t,"each",function(){return P}),n.d(t,"indexOf",function(){return E}),n.d(t,"inArray",function(){return O}),n.d(t,"clone",function(){return j}),n.d(t,"arrayKeyDiff",function(){return N}),n.d(t,"extend",function(){return M}),n.d(t,"addTemplates",function(){return D}),n.d(t,"getTemplate",function(){return H}),n.d(t,"serializeForm",function(){return R}),n.d(t,"extractUrls",function(){return F}),n.d(t,"isRetina",function(){return I}),n.d(t,"getCaretCharacterOffsetWithin",function(){return W}),n.d(t,"formatCount",function(){return q}),n.d(t,"encodeHtml",function(){return z}),n.d(t,"decodeHtml",function(){return X});var i=n(5),o=n(6),r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function s(e){var t=PageID;return function(){t===PageID&&e.apply(this,arguments)}}function c(e,t){return setTimeout(s(e),t)}window.PageID=window.PageID||1;var l=function(e,t){return Math.random()*(t-e+1)+e},u=function(e,t){return Math.floor(l(e,t))},d=function(e){return void 0===e},p=function(e){return e&&"[object Function]"===Object.prototype.toString.call(e)},h=function(e){return"[object Array]"===Object.prototype.toString.call(e)},f=function(e){return"string"==typeof e},g=function(e){return"[object Object]"===Object.prototype.toString.call(e)};function v(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var w=function(){return+new Date},_=function(){return window.Image?new Image:ce("img")},m=function(e){return(e||"").replace(/^\s+|\s+$/g,"")},b=function(e){return e?e.replace(/<(?:.|\s)*?>/g,""):""},y=function(e){return e?e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1"):""};function C(e){return!0===e?1:parseInt(e)||0}function S(e){return!0===e?1:parseFloat(e)||0}function k(e){return(e=C(e))<0?0:e}function x(e){return!isNaN(e)}function A(e){return e.replace(/&#(\d\d+);/g,function(e,t){return(t=C(t))>=32?String.fromCharCode(t):e}).replace(/&quot;/gi,'"').replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;/gi,"&")}function T(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return Object(i.se)("<textarea>"+e+"</textarea>").value}function L(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}function B(e){return T(e.replace(/\t/g,"\n"))}function P(e,t){if(g(e)||void 0===e.length){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!1===t.call(e[n],n,e[n]))break}else for(var i=0,o=e.length;i<o;i++){var r=e[i];if(!1===t.call(r,i,r))break}return e}function E(e,t,n){for(var i=n||0,o=(e||[]).length;i<o;i++)if(e[i]==t)return i;return-1}function O(e,t){return-1!==E(t,e)}function j(e,t){var n=g(e)||void 0===e.length?{}:[];for(var i in e)(!/webkit/i.test(_ua)||"layerX"!=i&&"layerY"!=i&&"webkitMovementX"!=i&&"webkitMovementY"!=i)&&(t&&"object"===a(e[i])&&"prototype"!==i&&null!==e[i]?n[i]=j(e[i]):n[i]=e[i]);return n}function N(e){var t={},n=arguments.length,i=arguments;for(var o in e)if(e.hasOwnProperty(o)){for(var r=!1,a=1;a<n;a++)i[a][o]&&i[a][o]===e[o]&&(r=!0);r||(t[o]=e[o])}return t}function M(){var e=arguments,t=e.length,n=e[0]||{},i=1,o=!1;for("boolean"==typeof n&&(o=n,n=e[1]||{},i=2),"object"===(void 0===n?"undefined":a(n))||p(n)||(n={});i<t;i++){var r=e[i];if(null!=r)for(var s in r)if(r.hasOwnProperty(s)){var c=n[s],l=r[s];n!==l&&(o&&l&&"object"===(void 0===l?"undefined":a(l))&&!l.nodeType?n[s]=M(o,c||(null!=l.length?[]:{}),l):void 0!==l&&(n[s]=l))}}return n}function D(e){window.templates=window.templates||{},M(window.templates,e)}function H(e,t){var n=(window.templates=window.templates||{})[e];return"function"==typeof n&&(n=n()),n&&t?Object(i.rs)(n,t):n||""}function R(e){if("object"!==(void 0===e?"undefined":a(e)))return!1;var t={},n=function(t){return Object(i.geByTag)(t,e)},o=function(n,o){if(o.name)if("text"!==o.type&&o.type)if(o.getAttribute("bool")){var r=Object(i.val)(o);if(!r||"0"===r)return;t[o.name]=1}else t[o.name]=browser.msie&&!o.value&&e[o.name]?e[o.name].value:o.value;else t[o.name]=Object(i.val)(o)};return P(n("input"),function(e,t){if("radio"!==t.type&&"checkbox"!==t.type||t.checked)return o(0,t)}),P(n("select"),o),P(n("textarea"),o),t}function F(e,t){for(var n=t?/(?:([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,9}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|[ \t\r\n \u00A0]|$))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9а-яєґї_\-]+\.)+(?:рф|укр|онлайн|сайт|срб))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|[ \t\r\n \u00A0]|$)))/i:/(?:([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,9}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|[ \t\r\n \u00A0]))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9а-яєґї_\-]+\.)+(?:рф|укр|онлайн|сайт|срб))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|[ \t\r\n \u00A0])))/i,i=void 0,o=[];e&&(i=e.match(n));){e=e.substr(i.index+i[0].length);var r=0;i[4]||(r=7),o.push({url:i[2+r],query:i[5+r]||"",domain:i[4+r]})}return o}var I=function(){return window.devicePixelRatio>=2};function W(e){var t=0,n=0,i=e.ownerDocument||e.document,o=i.defaultView||i.parentWindow;if(o.getSelection().rangeCount>0){var r=o.getSelection().getRangeAt(0),a=r.cloneRange();a.selectNodeContents(e),a.setEnd(r.startContainer,r.startOffset),t=a.toString().length,a.setEnd(r.endContainer,r.endOffset),n=a.toString().length}return[t,n]}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.kLimit||1e3;return e>=(t.mLimit||1e6)&&!t.noCheck?q(e=(e=C(e/1e5))>1e3?C(e/10):e/10,M(t,{noCheck:!0}),!0)+"M":e>=n&&!t.noCheck?q(e=(e=C(e/100))>100?C(e/10):e/10,M(t,{noCheck:!0}),!0)+"K":Object(o.langNumeric)(e,"%s",!0).replace(/,/g,".")}var V,U=r((V=null,[function(e){return V||(V=Object(i.se)("<span> </span>")),V.innerText=e,V.innerHTML.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},function(e){return V||(V=Object(i.se)("<span> </span>")),V.innerHTML=e,V.innerText}]),2),z=U[0],X=U[1];window.isRetina=I,window.extractUrls=F,window.serializeForm=R,window.addTemplates=D,window.getTemplate=H,window.rand=l,window.irand=u,window.isUndefined=d,window.isFunction=p,window.isArray=h,window.isString=f,window.isObject=g,window.isEmpty=v,window.vkNow=w,window.vkImage=_,window.trim=m,window.stripHTML=b,window.escapeRE=y,window.intval=C,window.floatval=S,window.positive=k,window.isNumeric=x,window.winToUtf=A,window.replaceEntities=T,window.clean=L,window.unclean=B,window.each=P,window.indexOf=E,window.inArray=O,window.clone=j,window.arrayKeyDiff=N,window.extend=M,window.vkLocal=s,window.lTimeout=c,window.getCaretCharacterOffsetWithin=W,window.formatCount=q,window.encodeHtml=z,window.decodeHtml=X},function(e,t,n){"use strict";n.r(t),n.d(t,"ge",function(){return r}),n.d(t,"geByTag",function(){return a}),n.d(t,"geByTag1",function(){return s}),n.d(t,"geByClass",function(){return c}),n.d(t,"geByClass1",function(){return l}),n.d(t,"gpeByClass",function(){return u}),n.d(t,"domQuery",function(){return d}),n.d(t,"domQuery1",function(){return p}),n.d(t,"domClosest",function(){return h}),n.d(t,"domClosestByTag",function(){return f}),n.d(t,"gpeByTag",function(){return g}),n.d(t,"ce",function(){return v}),n.d(t,"re",function(){return C}),n.d(t,"se",function(){return S}),n.d(t,"sech",function(){return k}),n.d(t,"rs",function(){return x}),n.d(t,"psr",function(){return A}),n.d(t,"domReplaceEl",function(){return T}),n.d(t,"domEL",function(){return L}),n.d(t,"domNS",function(){return B}),n.d(t,"domPS",function(){return P}),n.d(t,"domFC",function(){return E}),n.d(t,"domLC",function(){return O}),n.d(t,"domPN",function(){return j}),n.d(t,"domChildren",function(){return N}),n.d(t,"domInsertBefore",function(){return M}),n.d(t,"domInsertAfter",function(){return D}),n.d(t,"domByClass",function(){return H}),n.d(t,"domData",function(){return R}),n.d(t,"domChildIndex",function(){return F}),n.d(t,"domCA",function(){return I}),n.d(t,"domClosestSibling",function(){return W}),n.d(t,"matchesSelector",function(){return q}),n.d(t,"isHover",function(){return V}),n.d(t,"isAncestor",function(){return U}),n.d(t,"getScroll",function(){return z}),n.d(t,"domClosestPositioned",function(){return X}),n.d(t,"domClosestOverflowHidden",function(){return Y}),n.d(t,"show",function(){return K}),n.d(t,"hide",function(){return $}),n.d(t,"isVisible",function(){return G}),n.d(t,"clientHeight",function(){return J}),n.d(t,"getClientRectOffsetY",function(){return Q}),n.d(t,"toggle",function(){return Z}),n.d(t,"boundingRectEnabled",function(){return ee}),n.d(t,"getXYRect",function(){return te}),n.d(t,"getXY",function(){return ne}),n.d(t,"isWindow",function(){return ie}),n.d(t,"getSize",function(){return oe}),n.d(t,"getW",function(){return re}),n.d(t,"getH",function(){return ae}),n.d(t,"hasClass",function(){return se}),n.d(t,"addClass",function(){return ce}),n.d(t,"addClassDelayed",function(){return le}),n.d(t,"removeClass",function(){return ue}),n.d(t,"removeClassDelayed",function(){return de}),n.d(t,"toggleClass",function(){return pe}),n.d(t,"toggleClassDelayed",function(){return he}),n.d(t,"replaceClass",function(){return fe}),n.d(t,"getStyle",function(){return ge}),n.d(t,"setStyle",function(){return ve}),n.d(t,"setStyleDelayed",function(){return we}),n.d(t,"setPseudoStyle",function(){return _e}),n.d(t,"data",function(){return me}),n.d(t,"attr",function(){return be}),n.d(t,"removeAttr",function(){return ye}),n.d(t,"removeData",function(){return Ce}),n.d(t,"cleanElems",function(){return Se}),n.d(t,"setTitle",function(){return ke}),n.d(t,"getZoom",function(){return xe}),n.d(t,"val",function(){return Ae}),n.d(t,"elfocus",function(){return Te}),n.d(t,"traverseParent",function(){return Le}),n.d(t,"setDocumentTitle",function(){return Pe}),n.d(t,"lockDocumentTitle",function(){return Ee}),n.d(t,"initDomScripts",function(){return Oe});var i=n(4),o=n(3),r=function(e){return"string"==typeof e||"number"==typeof e?document.getElementById(e):e};function a(e,t){return(t=r(t)||document).getElementsByTagName(e)}function s(e,t){return(t=r(t)||document).querySelector&&t.querySelector(e)||a(e,t)[0]}function c(e,t,n){return t=r(t)||document,n=n||"*",e=("."+e).replace(/\s+/gm,"."),Array.prototype.slice.call(t.querySelectorAll(n+e))}function l(e,t,n){return t=r(t)||document,n=n||"*",t.querySelector&&t.querySelector(n+("."+e).replace(/\s+/gm,"."))||c(e,t,n)[0]}function u(e,t,n){if(!(t=r(t)))return null;for(;n!==t&&(t=t.parentNode);)if(se(t,e))return t;return null}function d(e,t){return(t||document).querySelectorAll(e)}function p(e,t){return(t||document).querySelector(e)}function h(e,t){return se(t,e)?t:u(e,t)}function f(e,t){return e=e.toUpperCase(),t.nodeType===Node.ELEMENT_NODE&&t.tagName.toUpperCase()===e?t:g(e,t)}function g(e,t){if(!(t=r(t)))return null;for(e=e.toUpperCase();t=t.parentNode;)if(t.tagName&&t.tagName.toUpperCase()===e)return t;return null}function v(e,t,n){var o=document.createElement(e);return t&&Object(i.extend)(o,t),n&&ve(o,n),o}var w,_,m,b,y=(w=document,_=w.createDocumentFragment(),m=w.createElement("div"),b=w.createRange&&w.createRange(),_.appendChild(m),b&&b.selectNodeContents(m),b&&b.createContextualFragment?function(e){return e?b.createContextualFragment(e):w.createDocumentFragment()}:function(e){if(!e)return w.createDocumentFragment();m.innerHTML=e;for(var t=w.createDocumentFragment();m.firstChild;)t.appendChild(m.firstChild);return t});function C(e){return(e=r(e))&&e.parentNode&&e.parentNode.removeChild(e),e}var S=function(e){return E(v("div",{innerHTML:e}))},k=function(e){return N(v("div",{innerHTML:e}))};function x(e,t){return Object(i.each)(t,function(t,n){e=e.replace(new RegExp("%"+t+"%","g"),(void 0===n?"":n).toString().replace(/\$/g,"&#036;"))}),e}function A(e){return"https:"!==locProtocol?e:e=(e=(e=(e=(e=e.replace(/http:\/\/(cs(\d+)\.vk\.me\/c(\d+)\/)/gi,"https://$1")).replace(/http:\/\/cs(\d+)\.(userapi\.com|vk\.com|vk\.me|vkontakte\.ru)\/c(\d+)\/(v\d+\/|[a-z0-9\/_:\-]+\.jpg)/gi,"https://pp.vk.me/c$3/$4")).replace(/http:\/\/cs(\d+)\.(userapi\.com|vk\.com|vk\.me|vkontakte\.ru)\/([a-z0-9\/_:\-]+\.jpg)/gi,"https://pp.vk.me/c$1/$3")).replace(/http:\/\/cs(\d+)\.(userapi\.com|vk\.com|vk\.me|vkontakte\.ru)\//gi,"https://ps.vk.me/c$1/")).replace(/http:\/\/video(\d+)\.vkadre\.ru\//gi,"https://ps.vk.me/v$1/")}function T(e,t){return Object(i.isString)(t)&&(t=S(t)),j(e).replaceChild(t,e),t}function L(e,t){for(t=t?"previousSibling":"nextSibling";e&&!e.tagName;)e=e[t];return e}var B=function(e){return L((e||{}).nextSibling)},P=function(e){return L((e||{}).previousSibling,1)},E=function(e){return L((e||{}).firstChild)},O=function(e){return L((e||{}).lastChild,1)},j=function(e){return(e||{}).parentNode};function N(e){for(var t=[],n=e.childNodes,i=0;i<n.length;i++)n[i].tagName&&t.push(n[i]);return t}function M(e,t){var n=j(t);return n&&n.insertBefore(e,t)}function D(e,t){var n=j(t);return n&&n.insertBefore(e,B(t))}function H(e,t){return e?l(t,e):e}function R(e,t,n){return e?void 0!==n?(null===n?e.removeAttribute("data-"+t):e.setAttribute("data-"+t,n),n):e.getAttribute("data-"+t):null}function F(e){for(var t=0;null!=(e=P(e));)t++;return t}function I(e,t){do{e=j(e)}while(e&&!q(e,t));return e}function W(e,t,n){for(var i=null;null===i&&e;)(e=-1===n?P(e):B(e))&&q(e,t)&&(i=e);return i}function q(e,t){return!(!(e=r(e))||e===document)&&(e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}).call(e,t)}function V(e){return q(e,":hover")}function U(e,t){var n=r(e);if(t=r(t),!e||!t)return!1;for(;n=n.parentNode;)if(n===t)return!0;return!1}function z(){var e=browser.msie6?r("PageContainer"):document.body,t=document.documentElement;return[e.scrollLeft||t.scrollLeft||window.pageXOffset||0,e.scrollTop||t.scrollTop||window.pageYOffset||0,t.clientWidth||e.clientWidth||0,t.clientHeight||e.clientHeight||0]}function X(e,t){for(var n=(t=t||{}).fromEl||j(e),o=t.positions||["relative","absolute","fixed"];n&&n!==bodyNode;){var r=ge(n,"position");if(Object(i.inArray)(r,o)&&(!t.noOverflow||"hidden"!==ge(n,"overflow")))break;n=j(n)}return n}function Y(e,t){for(var n=e=r(e),i=void 0,o=void 0,a=void 0,s=!1;n&&n.tagName&&n!==bodyNode;){if(i=ge(n,"position"),o=ge(n,"overflow"),a=ge(n,"transform"),t&&browser.mozilla){if("page_wrap"!=n.id&&n!==e&&"visible"!==o&&("static"===i?!s||"relative"===s:"fixed"!==s))break}else if(n!==e&&"visible"!==o&&("static"===i?!s||"relative"===s:"fixed"!==s))break;"none"!==a?s=void 0:"static"!==i&&"fixed"!==s&&(s=i),n=j(n)}return n}function K(e){var t=arguments.length;if(t>1)for(var n=0;n<t;n++)K(arguments[n]);else if((e=r(e))&&e.style){var i=e.olddisplay,o=e.tagName.toLowerCase(),a="block";e.style.display=i||"","none"===ge(e,"display")&&(a=se(e,"inline")||se(e,"_inline")?"inline":se(e,"_inline_block")?"inline-block":"tr"!==o||browser.msie?"table"!==o||browser.msie?"block":"table":"table-row",e.style.display=e.olddisplay=a)}}function $(e){var t=arguments.length;if(t>1)for(var n=0;n<t;n++)$(arguments[n]);else if((e=r(e))&&e.style){var i=ge(e,"display");e.olddisplay="none"!==i?i:"",e.style.display="none"}}function G(e){return!(!(e=r(e))||!e.style)&&"none"!==ge(e,"display")}function J(){return window.innerHeight||document.documentElement.clientHeight||bodyNode.clientHeight}function Q(e,t,n){e=r(e),n=n||0;var o=ne(e)[1],a=oe(e)[1],s=window,c=document.documentElement,l=Math.max(Object(i.intval)(s.innerHeight),Object(i.intval)(c.clientHeight)),u=r("page_header_cont"),d=c.scrollTop||bodyNode.scrollTop||window.scrollY||0,p=vk.staticheader?Math.max(0,oe(u)[1]-d):oe(u)[1];if(t){if(o+a<d+p+n)return o+a-d-p-n;if(o>d+l-n)return o-d-l+n}else{if(o<d+p+n)return o-d-p-n;if(o+a>d+l-n)return o+a-d-l+n}return 0}function Z(e,t){return void 0===t&&(t=!G(e)),t?K(e):$(e),t}function ee(e){return void 0!==e.getBoundingClientRect}function te(e,t){var n=void 0;if(t&&"inline"===ge(e,"display")){var i=e.getClientRects();n=i&&i[0]||e.getBoundingClientRect()}else n=e.getBoundingClientRect();return n}function ne(e,t){if(!(e=r(e)))return[0,0];var n=e.ownerDocument,i={top:0,left:0};if(!n)return[0,0];var o=n.documentElement;ee(e)&&(i=te(e,!0));var a=n===n.window?n:9===n.nodeType&&(n.defaultView||n.parentWindow);return[i.left+(t?0:a.pageXOffset||o.scrollLeft)-(o.clientLeft||0),i.top+(t?0:a.pageYOffset||o.scrollTop)-(o.clientTop||0)]}function ie(e){return null!=e&&e===e.window}function oe(e,t,n){e=r(e);var o=document.documentElement,a=[0,0],s=void 0;if(t&&"border-box"===ge(e,"boxSizing")&&(t=!1),e===document)a=[Math.max(o.clientWidth,bodyNode.scrollWidth,o.scrollWidth,bodyNode.offsetWidth,o.offsetWidth),Math.max(o.clientHeight,bodyNode.scrollHeight,o.scrollHeight,bodyNode.offsetHeight,o.offsetHeight)];else if(e){var c=function(){a=ee(e)&&(s=te(e,n))&&void 0!==s.width?[s.width,s.height]:[e.offsetWidth,e.offsetHeight],t&&Object(i.each)(a,function(t,n){var o=t?["Top","Bottom"]:["Left","Right"];Object(i.each)(o,function(){a[t]-=parseFloat(ge(e,"padding"+this))||0,a[t]-=parseFloat(ge(e,"border"+this+"Width"))||0})})};if(G(e))c();else{var l={position:"absolute",visibility:"hidden",display:"block"},u={},d=!1;e.style.cssText.indexOf("!important")>-1&&(d=e.style.cssText),Object(i.each)(l,function(t,n){u[t]=e.style[t],e.style[t]=n}),c(),Object(i.each)(l,function(t,n){e.style[t]=u[t]}),d&&(e.style.cssText=d)}}return a}function re(e){return oe(e)[0]}function ae(e){return oe(e)[1]}function se(e,t){var n=r(e);return n&&1===n.nodeType&&(" "+n.className+" ").replace(window.whitespaceRegex," ").indexOf(" "+t+" ")>=0}function ce(e,t){var n=r(e);n&&!se(n,t)&&(n.className=(n.className?n.className+" ":"")+t)}window.whitespaceRegex=/[\t\r\n\f]/g;var le=function(e,t){return setTimeout(ce.pbind(e,t),0)};function ue(e,t){var n=r(e);n&&(n.className=Object(i.trim)((n.className||"").replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ")))}var de=function(e,t){return setTimeout(ue.pbind(e,t),0)};function pe(e,t,n){return void 0===n&&(n=!se(e,t)),(n?ce:ue)(e,t),n}function he(e,t,n){return void 0===n&&(n=!se(e,t)),(n?le:de)(e,t),n}function fe(e,t,n){ue(e,t),ce(e,n)}function ge(e,t,n){if(e=r(e),Object(i.isArray)(t)){var o={};return Object(i.each)(t,function(t,n){return o[n]=ge(e,n)}),o}if(!e)return"";if(void 0===n&&(n=!0),!n&&"opacity"===t&&browser.msie){var a=e.style.filter;return a?a.indexOf("opacity=")>=0?parseFloat(a.match(/opacity=([^)]*)/)[1])/100+"":"1":""}if(!n&&e.style&&(e.style[t]||"height"===t))return e.style[t];var s=void 0,c=document.defaultView||window;if(c.getComputedStyle){t=t.replace(/([A-Z])/g,"-$1").toLowerCase();var l=c.getComputedStyle(e,null);l&&(s=l.getPropertyValue(t))}else if(e.currentStyle){if("opacity"===t&&browser.msie){var u=e.currentStyle.filter;return u&&u.indexOf("opacity=")>=0?parseFloat(u.match(/opacity=([^)]*)/)[1])/100+"":"1"}var d=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()});"auto"===(s=e.currentStyle[t]||e.currentStyle[d])&&(s=0),s=(s+"").split(" "),Object(i.each)(s,function(t,n){if(!/^\d+(px)?$/i.test(n)&&/^\d/.test(n)){var i=e.style,o=i.left,r=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,i.left=n||0,s[t]=i.pixelLeft+"px",i.left=o,e.runtimeStyle.left=r}}),s=s.join(" ")}if(n&&("width"===t||"height"===t)){var p=oe(e,!0)[{width:0,height:1}[t]];s=(Object(i.intval)(s)?Math.max(Object(i.floatval)(s),p):p)+"px"}return s}function ve(e,t,n){if(e=r(e))if(Object(i.isObject)(t))Object(i.each)(t,function(t,n){return ve(e,t,n)});else if("opacity"===t)browser.msie&&((n+"").length?e.style.filter=1!==n?"alpha(opacity="+100*n+")":"":e.style.cssText=e.style.cssText.replace(/filter\s*:[^;]*/gi,""),e.style.zoom=1),e.style.opacity!==n&&(e.style.opacity=n);else try{var o="number"==typeof n;o&&/height|width/i.test(t)&&(n=Math.abs(n)),n=o&&!/z-?index|font-?weight|opacity|zoom|line-?height/i.test(t)?n+"px":n,e.style[t]!==n&&(e.style[t]=n)}catch(e){debugLog("setStyle error: ",[t,n],e)}}window.cssTransformProp=function(){var e=document.createElement("div");if(null==e.style.transform){var t=["Webkit","Moz","ms"];for(var n in t)if(void 0!==e.style[t[n]+"Transform"])return t[n]+"Transform"}return"transform"}();var we=function(e,t,n){return setTimeout(ve.pbind(e,t,n),0)};function _e(e,t,n){var o=me(e,"pseudo-id");o||(me(e,"pseudo-id",o=Object(i.irand)(1e8,999999999)),ce(e,"_pseudo_"+o));var a=t+"-style-"+o,s=r(a),c="._pseudo_"+o+":"+t+"{";s||(s=headNode.appendChild(v("style",{id:a,type:"text/css"}))),Object(i.each)(n,function(e,t){c+=e+": "+t+" !important;"}),c+="}",s.sheet?(s.sheet.cssRules.length&&s.sheet.deleteRule(0),s.sheet.insertRule(c,0)):s.styleSheet&&(s.styleSheet.cssText=c)}function me(e,t,n){if(!e)return!1;var i=e[vkExpand];return i||(i=e[vkExpand]=++vkUUID),void 0!==n&&(vkCache[i]||(vkCache[i]={},window.__debugMode&&(vkCache[i].__elem=e)),vkCache[i][t]=n),t?vkCache[i]&&vkCache[i][t]:i}function be(e,t,n){return e=r(e),void 0===n?e.getAttribute(t):(e.setAttribute(t,n),n)}function ye(e){for(var t=0,n=arguments.length;t<n;++t){var i=arguments[t];if(void 0!==e[i])try{delete e[i]}catch(t){try{e.removeAttribute(i)}catch(e){}}}}function Ce(e,t){var n=!!e&&e[vkExpand];if(n)if(t){if(vkCache[n]){delete vkCache[n][t],t="";var i=0;for(var r in vkCache[n])if("__elem"!==r){i++;break}i||Ce(e)}}else Object(o.removeEvent)(e),ye(e,vkExpand),delete vkCache[n]}function Se(){for(var e=arguments,t=0;t<e.length;++t){var n=r(e[t]);n&&(Ce(n),ye(n,"btnevents"))}}function ke(e,t,n){if((e=r(e))&&!e.titleSet){if(t||(t=e),t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)e.setAttribute("title",n||e.innerText||e.textContent);else{var i=s("b",e);i&&(i.scrollWidth>i.clientWidth||i.scrollHeight>i.clientHeight)?e.setAttribute("title",n||e.innerText||e.textContent):e.removeAttribute("title")}e.titleSet=1}}function xe(){var e=r("zoom_test_1")||document.body.appendChild(v("div",{id:"zoom_test_1"},{left:"10%",position:"absolute",visibility:"hidden"}));return(r("zoom_test_2")||document.body.appendChild(v("div",{id:"zoom_test_2"},{left:e.offsetLeft+"px",position:"absolute",visibility:"hidden"}))).offsetLeft/e.offsetLeft}function Ae(e,t,n){if(e=r(e))return void 0!==t&&(e.setValue?(e.setValue(t),!n&&e.phonblur&&e.phonblur()):"INPUT"===e.tagName||"TEXTAREA"===e.tagName?e.value=t:void 0!==e.emojiId&&window.Emoji?Emoji.val(e,t):e.innerHTML=t,!n&&Object(o.triggerEvent)(e,"valueChanged")),e.getValue?e.getValue():("INPUT"===e.tagName||"TEXTAREA"===e.tagName?e.value:e.innerHTML)||""}function Te(e,t,n){e=r(e);try{if(e.focus(),void 0!==t&&!1!==t||(t=e.value.length),void 0!==n&&!1!==n||(n=t),e.setSelectionRange)e.setSelectionRange(t,n);else if(window.getSelection&&document.createRange){var i=document.createRange();i.selectNodeContents(e),i.collapse(!1);var o=window.getSelection();o.removeAllRanges(),o.addRange(i)}}catch(e){}}function Le(e,t,n){for(e=r(e),n=n||999;e&&!t(e);){if(0===--n)return!1;try{if((e=j(e))===document)break}catch(t){e=!1}}return e}var Be=!1;function Pe(e){if(!Be)return window.document.title=Object(i.replaceEntities)(e)}function Ee(e){Be=e,e&&window.cur&&window.cur.destroy.push(function(){Ee(!1)})}function Oe(){window.vkExpand=window.vkExpand||"VK"+Object(i.vkNow)(),window.vkUUID=window.vkUUID||0,window.vkCache=window.vkCache||{}}window.ge=r,window.geByTag=a,window.geByTag1=s,window.geByClass=c,window.geByClass1=l,window.gpeByClass=u,window.domQuery=d,window.domQuery1=p,window.domClosest=h,window.ce=v,window.cf=y,window.re=C,window.se=S,window.sech=k,window.rs=x,window.psr=A,window.domReplaceEl=T,window.domEL=L,window.domNS=B,window.domPS=P,window.domFC=E,window.domLC=O,window.domPN=j,window.domChildren=N,window.domInsertBefore=M,window.domInsertAfter=D,window.domByClass=H,window.domData=R,window.domChildIndex=F,window.domCA=I,window.domClosestSibling=W,window.matchesSelector=q,window.isHover=V,window.isAncestor=U,window.getScroll=z,window.domClosestPositioned=X,window.domClosestOverflowHidden=Y,window.show=K,window.hide=$,window.isVisible=G,window.clientHeight=J,window.getClientRectOffsetY=Q,window.toggle=Z,window.boundingRectEnabled=ee,window.getXYRect=te,window.getXY=ne,window.isWindow=ie,window.getSize=oe,window.hasClass=se,window.addClass=ce,window.addClassDelayed=le,window.removeClass=ue,window.removeClassDelayed=de,window.toggleClass=pe,window.toggleClassDelayed=he,window.replaceClass=fe,window.getStyle=ge,window.setStyle=ve,window.setStyleDelayed=we,window.setPseudoStyle=_e,window.data=me,window.attr=be,window.removeAttr=ye,window.removeData=Ce,window.cleanElems=Se,window.setTitle=ke,window.getZoom=xe,window.val=Ae,window.elfocus=Te,window.traverseParent=Le,window.getH=ae,window.getW=re,window.domClosestByTag=f,window.setDocumentTitle=Pe,window.lockDocumentTitle=Ee},function(e,t,n){"use strict";n.r(t),n.d(t,"parseLatin",function(){return r}),n.d(t,"parseCyr",function(){return a}),n.d(t,"parseLatKeys",function(){return s}),n.d(t,"langNumeric",function(){return c}),n.d(t,"langSex",function(){return l}),n.d(t,"langStr",function(){return u}),n.d(t,"addLangKeys",function(){return d}),n.d(t,"getLang",function(){return p}),n.d(t,"langDate",function(){return h}),n.d(t,"getShortDate",function(){return f}),n.d(t,"getShortDateOrTime",function(){return g}),n.d(t,"langWordNumeric",function(){return v}),n.d(t,"getDateText",function(){return w}),n.d(t,"getBigDateNew",function(){return _}),n.d(t,"getSmDate",function(){return m});var i=n(2),o=n(4);function r(e){for(var t=["yo","zh","kh","ts","ch","sch","shch","sh","eh","yu","ya","YO","ZH","KH","TS","CH","SCH","SHCH","SH","EH","YU","YA","'"],n=["ё","ж","х","ц","ч","щ","щ","ш","э","ю","я","Ё","Ж","Х","Ц","Ч","Щ","Щ","Ш","Э","Ю","Я","ь"],i=e,o=0,r=t.length;o<r;o++)i=i.split(t[o]).join(n[o]);for(var a="abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCYёЁ",s=0,c=a.length;s<c;s++)i=i.split(a.charAt(s)).join("абвгдезийклмнопрстуфхцыАБВГДЕЗИЙКЛМНОПРСТУФХЦЫеЕ".charAt(s));return i===e?null:i}function a(e){for(var t=["yo","zh","kh","ts","ch","sch","shch","sh","eh","yu","ya","YO","ZH","KH","TS","CH","SCH","SHCH","SH","EH","YU","YA","'"],n=["ё","ж","х","ц","ч","щ","щ","ш","э","ю","я","Ё","Ж","Х","Ц","Ч","Щ","Щ","Ш","Э","Ю","Я","ь"],i="абвгдезийклмнопрстуфхцыАБВГДЕЗИЙКЛМНОПРСТУФХЦЫеЕ",o=e,r=0;r<n.length;r++)o=o.split(n[r]).join(t[r]);for(var a=0;a<i.length;a++)o=o.split(i.charAt(a)).join("abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCYёЁ".charAt(a));return o===e?null:o}function s(e){for(var t="qwertyuiop[]asdfghjkl;'zxcvbnm,./`",n=e,i=0;i<t.length;i++)n=n.split(t.charAt(i)).join("йцукенгшщзхъфывапролджэячсмитьбю.ё".charAt(i));return n==e?null:n}function c(e,t,n){if(!t||!window.langConfig)return e;var i=void 0;if(Object(o.isArray)(t)?(i=t[1],e!=Math.floor(e)?i=t[langConfig.numRules.float]:Object(o.each)(langConfig.numRules.int,function(n,r){if("*"==r[0])return i=t[r[2]],!1;var a=r[0]?e%r[0]:e;return-1!=Object(o.indexOf)(r[1],a)?(i=t[r[2]],!1):void 0})):i=t,n){for(var r=e.toString().split("."),a=[],s=r[0].length-3;s>-3;s-=3)a.unshift(r[0].slice(s>0?s:0,s+3));r[0]=a.join(langConfig.numDel),e=r.join(langConfig.numDec)}return i=(i||"%s").replace("%s",e)}function l(e,t){if(!Object(o.isArray)(t))return t;var n=t[1];return window.langConfig?(Object(o.each)(langConfig.sexRules,function(i,o){return"*"==o[0]?(n=t[o[1]],!1):e==o[0]&&t[o[1]]?(n=t[o[1]],!1):void 0}),n):n}function u(e){for(var t=arguments,n=t.length,i=e+"",o=1;o<n;o+=2){var r="%"===t[o][0]?t[o]:"{"+t[o]+"}";i=i.replace(r,t[o+1])}return i}function d(e,t){var n=t?window:window.cur;n.lang?Object(o.extend)(n.lang,e):n.lang=e}function p(){try{var e=Array.from(arguments),t=e.shift();if(!t)return"...";var n=window.cur.lang&&window.cur.lang[t]||window.lang&&window.lang[t]||window.langpack&&window.langpack[t]||window[t];if(!n){var i=t.split("_");return i.shift(),i.join(" ")}return Object(o.isFunction)(n)?n.apply(null,e):void 0===e[0]&&!Object(o.isArray)(n)||"raw"===e[0]?n:c(e[0],n,e[1])}catch(e){debugLog("lang error:"+e.message+"("+Array.from(arguments).join(", ")+")")}}function h(e,t,n,r,a,s){var c=void 0;if(s||(s=""),Object(o.isArray)(t)||(t=["",t,t,t,t]),"number"==typeof e||"string"==typeof e?(e>2147483646e3&&(e=0),e+=n,c=new Date(e)):c=e,a)t=t[1];else{var l="";!(l=Object(i.isToday)(c)?t[3]:Object(i.isYesterday)(c)?t[2]:Object(i.isTomorrow)(c)?t[4]:t[1])&&t[1]&&(l=t[1]),t=l}var u={hours:c.getHours(),minutes:c.getMinutes(),seconds:c.getSeconds(),day:c.getDate(),month:c.getMonth()+1,year:c.getFullYear()},d="";switch(3===vk.lang&&(d=c.getHours()>11?"pm":"am",u.hours=c.getHours()%12==0?12:c.getHours()%12),vk.lang){case 1:switch(c.getHours()){case 11:t=t.replace(" о "," об ");break;case 0:t=t.replace(" о "," в ")}break;case 3:!Object(i.isToday)(c)||Object(i.isYesterday)(c)||Object(i.isTomorrow)(c)||(t=s+t);break;case 12:case 73:1==c.getHours()&&(t=t.replace(" &#224;s "," &#224; "))}return 68===vk.lang&&(u.year=u.year+543),t.replace("{hour}",u.hours).replace("{num_hour}",Object(i.leadingZero)(u.hours)).replace("{minute}",Object(i.leadingZero)(u.minutes)).replace("{day}",u.day).replace("{num_day}",Object(i.leadingZero)(u.day)).replace("{month}",r[u.month]).replace("{year}",u.year).replace("{short_year}",u.year%100).replace("{second}",Object(i.leadingZero)(u.seconds)).replace("{am_pm}",d)}function f(e,t,n,i,o){e*=1e3,void 0===n&&(n=!0),void 0===i&&(i=p("months_of","raw")),t*=1e3;var r=Date.now(),a=new Date(r),s=new Date(e+t);return!o&&e>r&&e-r<864e5&&a.getDate()===s.getDate()?h(e,"{hour}:{minute} {am_pm}",t,[],!n):s.getYear()!==a.getYear()||e<r-157248e5?h(e,p("global_date","raw"),t,i,!n):h(e,p("global_short_date","raw"),t,i,!n)}function g(e,t,n,o){return Object(i.isToday)(new Date(1e3*e+1e3*t))?h(1e3*e,"{hour}:{minute} {am_pm}",1e3*t,[],!n):f(e,t,n,o)}function v(e,t,n){return Object(o.isArray)(t)&&e<t.length?t[e]:c(e,n)}function w(e,t){e+=t;var n=parseInt(Date.now()/1e3)-e,i="";if(n<60)i=p("global_just_now");else if(n<3600){i=v(Object(o.intval)(n/60),p("global_word_mins_ago","raw"),p("global_mins_ago","raw"))}else if(n<14400){i=v(Object(o.intval)(n/3600),p("global_word_hours_ago","raw"),p("global_hours_ago","raw"))}else i=_(e,0,!0,"_l");return i}function _(e,t,n,i){void 0===n&&(n=!0),void 0===t&&(t=0),void 0===i&&(i=""),t*=1e3;var o=new Date(1e3*e),r=new Date;return o.getFullYear()!==r.getFullYear()&&o.getTime()<r.getTime()-1728e5||Math.abs(o.getTime()-r.getTime())>157248e5?h(1e3*e,p("global_date","raw"),t,p("months_sm_of"),!n):h(1e3*e,p("global_short_date_time"+i,"raw"),t,p("months_sm_of"),!n)}function m(e,t,n){void 0===n&&(n=!0),void 0===t&&(t=0);var i=new Date,o=i.getFullYear(),r=i.getMonth(),a=new Date(1e3*e),s=a.getFullYear(),c=a.getMonth();return h(1e3*e,p(s<o&&(r>1||c<9||o-s>=2)?"global_date":"global_short_date_time","raw"),t,p("months_sm_of","raw"),!n)}window.parseLatin=r,window.parseCyr=a,window.parseLatKeys=s,window.langNumeric=c,window.langSex=l,window.langStr=u,window.addLangKeys=d,window.getLang=p,window.langDate=h,window.getShortDate=f,window.getShortDateOrTime=g,window.langWordNumeric=v,window.getDateText=w,window.getBigDateNew=_,window.getSmDate=m}]);